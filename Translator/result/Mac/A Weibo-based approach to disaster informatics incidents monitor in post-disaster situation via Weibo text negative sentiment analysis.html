<meta charset="utf-8"/> <h1align="center">A Weibo-based approach to disaster informatics: incidents monitor in post-disaster situation via Weibo text negative sentiment analysis</h1>
<input id="btn-mode" type="checkbox">
<hr>
<body>
<div class="parent">
<div id="source">
<br><a id="s0" onmouseover="over('s0', 'r0')" onmouseout="out('r0')">Abstract Similar to Twitter, Weibo is a popular Chinese microblogging service that is used to read and write millions of short text messages on any topic within 140-character limit. Users create status messages, which sometimes show opinions about different sub- jects. Particularly, after a disaster, people always express their states and emotions toward the situation via microblogging service. The previous study works revealed that public negative emotions could be associated with the subsequent incidents. Therefore, once a disaster happens, the crowed negative sentiment among victims needs to be paid more attention, which could be useful to discover the following emergency events such as public fear and crisis. In order to detect potential incidents implicated by victims’ negative emotions in the post-disaster situation, this paper proposes a structured framework including three phases. The first phase focuses on how to identify disaster-related Weibo messages from the massive and noisy microblogging stream, and the second phase is about how to filter negative sentiment messages from all of the disaster-concerned microblog- ging. We introduced machine learning methods into both of the above phases. In the last phase, we pay attention on crowd negative sentiment, by tracking and predicting victims’ negative emotions changing trend on the base of GM (1, 1) to carry out incidents discovery in a post-disaster situation. By the case study of Ya’an earthquake, we demonstrated that the proposed framework could perform well in incidents monitors such as aftershocks and potential public crisis, which is meaningful and useful to disaster relief process and emergency management in post-disaster situation.</a><br><br><a id="s1" onmouseover="over('s1', 'r1')" onmouseout="out('r1')">Keywords Disaster information 􏰀 Sentiment analysis 􏰀 Weibo text 􏰀 Incidents monitor</a><br><br><a id="s2" onmouseover="over('s2', 'r2')" onmouseout="out('r2')">& Hua Bai baihua1727@163.com 1</a><br><br><a id="s3" onmouseover="over('s3', 'r3')" onmouseout="out('r3')">People’s Republic of China</a><br><br><a id="s4" onmouseover="over('s4', 'r4')" onmouseout="out('r4')">School of Management, Harbin Institute of Technology, Harbin 150001,</a><br><br><a id="s5" onmouseover="over('s5', 'r5')" onmouseout="out('r5')">123</a><br><br><a id="s6" onmouseover="over('s6', 'r6')" onmouseout="out('r6')">1178 Nat Hazards (2016) 83:1177–1196 1 Introduction</a><br><br><a id="s7" onmouseover="over('s7', 'r7')" onmouseout="out('r7')">As the term suggests, microblogging services offer a quick, simple, and easy form of communication that enables users to share information about their current status, news, and other topics. Weibo, the most popular Chinese microblogging platform since its launch in May 2009, has become a universal real-time information network used by people all around China to help people discover what is happening in the moment.</a><br><br><a id="s8" onmouseover="over('s8', 'r8')" onmouseout="out('r8')">Microblogging services have proven to be a useful source of information for gaining first-hand information about disaster events from the community experiencing the disaster (Abel et al. 2012; Cameron et al. 2012; Chowdhury et al. 2013; Li and Rao 2010; Alexander 2014). It should be noted that this new source of information can not only potentially benefit emergency coordinators and responders in providing appropriate ser- vices to the affected area but could also identify abnormal changes in the public emotion. Microblogging and sentiment information embedded in the messages can indicate the emotion and behavior of those using social media (Vo and Collier 2013). When an emergency occurs, authorities need to know the civilian’s real-time responses in order to make relief decisions, coordinate emergency logistics, and reassure the populace against general panic. The increasing use of microblogging services is making tracking sentiment changes easier and faster (Lee et al. 2015; Olteanu et al. 2015). In particular, the Chinese language does not have white space between words in a sentence. Thus, users can com- municate more information through Weibo, the Chinese Microblogging platform, than through Twitter.</a><br><br><a id="s9" onmouseover="over('s9', 'r9')" onmouseout="out('r9')">In September 2015, the number of Monthly Active Users on Weibo reached 222 billion, 90 % of which were members (approximately 200 million users) accessing their account using a mobile client (Sina Company. Weibo Reports Third Quarter 2015 Results 2015). It is now possible to use this user base, especially the mobile clients, to study Chinese microblogging for the purpose of tracking public sentiment and situational awareness of disaster events.</a><br><br><a id="s10" onmouseover="over('s10', 'r10')" onmouseout="out('r10')">In recent years, researchers have proposed many methods that could be used to analyze microblogging instances in post-disaster situations. However, most previous works that considered disasters were primarily focused on monitoring and collecting information on damages and did not perform sentiment analysis on the victim’s microblogs. Thus, in our research we focus on how data from the Chinese Weibo service could be used in a post- disaster situation, specifically focusing on tracking and predicting the victim’s negative reactions and then discovering potential post-disaster incidents.</a><br><br><a id="s11" onmouseover="over('s11', 'r11')" onmouseout="out('r11')">In previous work, many effective disaster detection methods and classification algo- rithms have been proposed for messages concerning disasters. These works have shown that machine learning is useful when classifying instances of microblogging during a disaster. However, all these works used traditional word representation methods (i.e., bag of words) to representation text. Research has proven that a new algorithm, the distribution representation of words (DRW), does have better performance than the traditional bag-of- words method used in natural language processing. Thus, to obtain an efficient way to identify negative messages from a noisy Weibo stream, we compared different classic classification algorithms with two new text representation methods. As a result, we con- structed a machine learning model to detect negative Weibo messages efficiently and assist in the identification of secondary crises. To accurately measure the victims’ negative emotional state, we constructed two indexes, based on the prediction indexes from GM (1, 1)</a><br><br><a id="s12" onmouseover="over('s12', 'r12')" onmouseout="out('r12')">123Nat Hazards (2016) 83:1177–1196 1179 and real data. As a result, we could monitor incidents-related victims’ negative sentiment in a timely and effective manner during a post-disaster situation.</a><br><br><a id="s13" onmouseover="over('s13', 'r13')" onmouseout="out('r13')">The rest of the paper is organized as follows. First, (Sect. 2) related works are provided to explain the motivation and basement of this study. We then describe the proposed framework in details (Sect. 3), including an overview of the proposed framework structure (Sect. 3.1), which is followed by three mainly components: Phase 1: Disaster-related microblogging classification (Sect. 3.2), Phase 2: Negative messages filter (Sect. 3.3), and Phase 3: negative sentiment analysis and prediction (Sect. 3.4). Next, we experiment the proposed framework via Ya’an earthquake case study (Sect. 4) and then discuss our findings and future works (Sect. 5) at last.</a><br><br><a id="s14" onmouseover="over('s14', 'r14')" onmouseout="out('r14')">2 Related works</a><br><br><a id="s15" onmouseover="over('s15', 'r15')" onmouseout="out('r15')">Owing to the significant effects of microblogging messages during information diffusion, many researchers concentrate on their applications in disaster informatics.</a><br><br><a id="s16" onmouseover="over('s16', 'r16')" onmouseout="out('r16')">Regarding a closely related subject, many early researches show that microblogging could help to identify earthquake, fire, flood, and other disasters. They also develop several application systems on the base of Web2.0 and Twitter platform, such as ‘‘Did You Feel it?’’ (USGS. Did you feel it? 2005),‘‘Toretter’’ (Sakai et al. 2010, 2013, 2014), ‘‘Twici- dent’’ (Abel et al. 2012), ‘‘Tweet4act’’ (Chowdhury et al. 2013), ‘‘CrisisTracker’’ (Rogstadius et al. 2013), ‘‘Ushahidi platform (http://www.ushahidi.com/)’’ (Omidyar Network 2013), ‘‘Twitter Earthquake Detector’’ (Earle et al. 2011), ‘‘Emergency Situation Awareness’’ (Yin et al. 2012; Robinson et al. 2013), ‘‘EARS’’ (Avvenuti et al. 2014). Besides, Bella et al. (2014) developed the first Chinese disaster detection system, which is named Sina Weibo Incidents Monitor (SWIM). This study and their interface show that amount of Weibo members post related microblogging messages if they are impacted by an emergency event.</a><br><br><a id="s17" onmouseover="over('s17', 'r17')" onmouseout="out('r17')">Microblogging could be a service for disaster relief and also could be a tool by the authority to provide emotion aiding and counter disinformation (Hughes and Palen 2009). By studying the Tweets dataset from Red River Valley flooding, Vieweg et al. (2010) claimed that Twitter could be used to gain a feel for a civilian response after a disaster event has happened. Related similar findings [KCIS] (Ma et al. 2013) note that Weibo platform is also used widely as an information communication service to post the status of an unfolding post-disaster situation. For example, if one victim is safe, what the ongoing Weibo topics are the feelings caused by the disaster event and the opinions about authority response measures.</a><br><br><a id="s18" onmouseover="over('s18', 'r18')" onmouseout="out('r18')">There has been much research in this field of sentiment classification. Traditionally, most research concentrated on analysis of larger pieces of text, such as reviews. Thanks to the quick development of microblogging, more and more researchers try to introduce network information sentiment analysis technique (such as Natural Language Processing and Machine Learning) into microblogging text sentiment analysis. Mostafa (2013) studied several company’s customers’ tweets and found that the customers have positive and negative sentiment to different famous products. Thewall et al. (2011) proposed Twitter users’ emotion strength could be changed during an emergency situation. In general, there are mainly there kinds of methods to identify microblogging sentiment.</a><br><br><a id="s19" onmouseover="over('s19', 'r19')" onmouseout="out('r19')">1. Emotion words dictionary-based method. This approach could remove a large part of unrelated words and documents. Thus, it is suitable for noisy and large-scale online</a><br><br><a id="s20" onmouseover="over('s20', 'r20')" onmouseout="out('r20')">1231180Nat Hazards (2016) 83:1177–1196 2.</a><br><br><a id="s21" onmouseover="over('s21', 'r21')" onmouseout="out('r21')">3.</a><br><br><a id="s22" onmouseover="over('s22', 'r22')" onmouseout="out('r22')">social media dataset. Similar to the popular English emotion words’ dictionaries Google Profiles of Mood States and Linguistic Inquiry and Word Count, there are several widely used Chinese emotion words dictionaries (Hownet and DUTIR) (Xu et al. 2008), to achieve this work. However, different from English, Chinese is an analytic language. Most Chinese sentences express sentiment not via adjectives and adverb words, so this approach does not perform very well in Chinese text sentiment analysis.</a><br><br><a id="s23" onmouseover="over('s23', 'r23')" onmouseout="out('r23')">Rule-based method. There exists a considerable amount of settled collocation and phrase in the text. One sentence is a process of different stages; thus, rule-based emotion method could help to implement sentence sentiment analysis. However, Chinese is diversity language, particularly in online microblogging text. Many members use homophonic words, dialect, emoticons and even online language, which offer big difficult for the sentiment classification work by emotion rule-based method (Neviarouskaya et al. 2011).</a><br><br><a id="s24" onmouseover="over('s24', 'r24')" onmouseout="out('r24')">Machine learning method. This approach is widely used in artificial intelligence (AI). Pang and Lee (2008) introduced this empirical method into text sentiment analysis for the first time and get a better result on the based of movie reviews dataset. One of the difficulties of sentiment analysis in microblogging noted by Aisopos et al. (2012) was the sparsely of the texts due to the various short and irregular information expression message text found on the social media tools (Twitter). Machine learning approach has its advantage aiming to overcome this problem by selecting suitable features derived from microblogging text, and the properties offered by the platform. The feature could be N-grams, emoticons, punctuations, re-tweets, hostages, and so on (Barbosa and Feng 2010).</a><br><br><a id="s25" onmouseover="over('s25', 'r25')" onmouseout="out('r25')">Currently, several researchers start to pay more attention to microblogging sentiment analysis in disaster situations, such as the hurricanes (Mandel et al. 2012) and gas explosions (Nagy and Stamberger 2012). The two works all use machine learning method to implement sentiment analysis on English data. However,most of Chinese researchers have not taken enough account of this study area. Both of Qu et al. (2010), and Zhou et al. 2013) focus on Chinese Weibo messages after Yushu (Qinghai, China) earthquake hap- pened, Qu et al. analyze the content, trend and diffusion path of post-disaster Weibo messages, Zhou et al. classify post-disaster Weibo messages by Bayes model for disaster response. The previous works all ignore the study about post-disaster microblogging sentiment analysis. Fortunately, for Weibo sentiment analysis, the available works are abundant. Many investigators adapted machine learning method to select suitable features, classify experiment data, and this approach has been shown very well performance in microblogging. Thus, the feature-based machine learning method is chosen to implement our Weibo sentiment analysis work in this study.</a><br><br><a id="s26" onmouseover="over('s26', 'r26')" onmouseout="out('r26')">Thanks to the interactive diversity and communicate quickly characteristics, online social media platform is becoming much more important to emergency crisis management. Online social media has been a critical platform for individual and organization to seek and share disaster information from a daily chatting tool (Cheng et al. 2011). Post-disaster, online users tend to share their stories and show their viewpoints about the disaster event, the resulting large-scale real-time crisis information data offer an easy way to track public opinion (Rowe et al. (2011). There were 17 items concerning disasters in the Top-100 Crisis Events on Chinese Sina Weibo in 2013, which drive us to pay more attention on social media in disaster crisis management. Sakaki take online users as social sensors and adapt Heterogeneous network (Follower networks and Information flow networks) to study</a><br><br><a id="s27" onmouseover="over('s27', 'r27')" onmouseout="out('r27')">123Nat Hazards (2016) 83:1177–1196 1181 twitters information communication network in disaster situation. They claim that in disaster events, information communication path is shorter than other topics (Sakai et al. 2010). Furthermore, researchers could discover rumors (Takahashi and Igata 2012) and predict online information credibility (Castillo and Mendoza 2013) in disaster social media. In fact, social media itself provide a mechanism to restrain rumors diffusion, Mendoza et al. and Oh et al. demonstrate that users would question the information from low-credibility source (Mendoza et al. 2010; Oh et al. 2010).</a><br><br><a id="s28" onmouseover="over('s28', 'r28')" onmouseout="out('r28')">In addition, disaster social media plays an important role on traditional crisis com- munication activities that is to restore organization image and impact public recognition (Utz et al. 2013). This is a single-way method to use social media in disaster crisis management; however, social media is a two-way communication platform and we could also collect public opinion by this tool (Heath et al. 2009). Unfortunately, most of the previous work focus on the function of perfecting organization image and just take social media as an aiding tool for the traditional crisis communication (Austin et al. 2012).</a><br><br><a id="s29" onmouseover="over('s29', 'r29')" onmouseout="out('r29')">On the base of above-listed works, we develop a framework using Chinese Weibo messages to track victims’ sentiment in a post-disaster situation, which could be employed by the authorities for the disaster emotion aiding and secondary emergency response.</a><br><br><a id="s30" onmouseover="over('s30', 'r30')" onmouseout="out('r30')">3 Incidents discovery framework in post-disaster situation based on Weibo text</a><br><br><a id="s31" onmouseover="over('s31', 'r31')" onmouseout="out('r31')">3.1 Framework structure</a><br><br><a id="s32" onmouseover="over('s32', 'r32')" onmouseout="out('r32')">For building our framework, we draw upon the analysis from Thelwall et al. (2011) about the relation between event and changes in the intensity of opinions express in social networks. Their study reveals that there is evidence that the importance of the events commented on Twitter is related with the increase as the intensity of negative reviews. We also capitalize upon the existing findings of related messages classification (Vieweg 2012) in post-disaster situation, and then we propose our motivation and task as follows.</a><br><br><a id="s33" onmouseover="over('s33', 'r33')" onmouseout="out('r33')">(a) Aiming to analyze the sentiment changing in a post-disaster situation, the first important task is to recognize if Weibo messages are related to a current disaster event. Once disaster happens, there would be a mass of Weibo messages swarming. Thus, it is necessary to equip a classifier for detecting related messages efficiently and quickly.</a><br><br><a id="s34" onmouseover="over('s34', 'r34')" onmouseout="out('r34')">(b) Select suitable features and classify algorithm to identify negative messages. Due to the large-scale and noisy characteristics of Weibo data, it is meaningful to filter out the positive and neutral related messages and just focus on the negative messages to track the abnormal emotions of victims. Hence, we need to build a suitable classifier to identify negative messages from massive Weibo messages’ stream within a short time.</a><br><br><a id="s35" onmouseover="over('s35', 'r35')" onmouseout="out('r35')">(c) Develop empirical measure to track victim’s sentiment changing trend and then discover potential incidents. In general, the victims’ negative emotions would change along with time, and their emotions changing might be discovered by their Weibo messages. Therefore, we would like to find a way to measure victims’ negative emotions via their microblogging and predict their changing trend.</a><br><br><a id="s36" onmouseover="over('s36', 'r36')" onmouseout="out('r36')">1231182 Nat Hazards (2016) 83:1177–1196</a><br><br><a id="s37" onmouseover="over('s37', 'r37')" onmouseout="out('r37')"> Based on the analysis above, our proposed framework for tracking victims’ negative sentiment and incidents discovery in post-disaster situation consists of three phases.</a><br><br><a id="s38" onmouseover="over('s38', 'r38')" onmouseout="out('r38')">An overview and summary of our framework is illustrated in Fig. 1.</a><br><br><a id="s39" onmouseover="over('s39', 'r39')" onmouseout="out('r39')">3.2 Phase 1: identifying disaster-related messages</a><br><br><a id="s40" onmouseover="over('s40', 'r40')" onmouseout="out('r40')">Weibo has an application programming interface (API) that facilitates collecting Chinese microblogging messages after the outbreak of disaster events. For microblogging capture, we use Weibo’s API as our data source.</a><br><br><a id="s41" onmouseover="over('s41', 'r41')" onmouseout="out('r41')">By ‘‘public_timeline’’ interface, we can capture an amount of latest public Weibo messages. As a general rule, it returns the most recent 200 public messages, with a rate limit of 150 requests per hour. This endpoint is polled every 24 s. In brief, this interface could offer 470 messages per minute, or around 28,000 per hour.</a><br><br><a id="s42" onmouseover="over('s42', 'r42')" onmouseout="out('r42')">       Weibo Weibo Weibo Weibo Weibo Weibo Weibo   Crawling microblogging flow from Weibo Application Programming InterfaceWeibo Weibo WeiboRelated messagesPhase 1: identify disaster related messagesPhase 2: negative messages filterPhase 3: negative sentiment analysis and prediction           Weibo WeiboNegative messagesWeibo WeiboUn-negative messages   WeiboEpoch 1Weibo</a><br><br><a id="s43" onmouseover="over('s43', 'r43')" onmouseout="out('r43')">Epoch 2</a><br><br><a id="s44" onmouseover="over('s44', 'r44')" onmouseout="out('r44')">  Calculate Disaster Concerned Index and Negative Emotional Index of each epoch and figure out the difference between real data and prediction data to discover potential incidents</a><br><br><a id="s45" onmouseover="over('s45', 'r45')" onmouseout="out('r45')">      Fig. 1 Framework structureWeibo WeiboUn-related messages123ReportReportReportReportNat Hazards (2016) 83:1177–1196 1183</a><br><br><a id="s46" onmouseover="over('s46', 'r46')" onmouseout="out('r46')"> However, these real-time public Weibo messages come from all around China. Thus, aiming to track victims’ abnormal emotions and reduce the scale of the data, we could select public messages from potentially influenced areas to classify target data via Weibo members’ geolocation feature.</a><br><br><a id="s47" onmouseover="over('s47', 'r47')" onmouseout="out('r47')">In order to compare different classification algorithms, it is necessary to collect and label a training dataset. However, because Weibo’s ‘‘public_timeline’’ interface can merely provide the latest messages, we were required to find an alternate way to gather historical messages and build a training dataset. The Sina Weibo Company defines Daily Active Users based on whether the users are logged in or not every day. According to Sina Weibo’s DAU definition, we obtained the UID of the Daily Active Users located in areas affected a disaster and then captured the messages that were posted within 24 h of a disaster event. In this way, we collected 12,464 messages in total, including the Yushu earthquake dataset (3442 messages), Beijing rainstorm dataset (2517 messages), and Yuyao flooding dataset (3928 messages). Furthermore, to compare the performance of different classification algorithms, messages were manually examined and labeled either disaster-related messages (positive) or non-related messages (negative). This task was carried out by two Chinese-speaking authors. Their individual results were compared and an agreement reached. As shown in Table 1, 9887 disaster-related messages were found using this process.</a><br><br><a id="s48" onmouseover="over('s48', 'r48')" onmouseout="out('r48')">In the initial phase, an automated classifier system is needed to identify disaster-related messages from the stream as a whole. Since microblogging instances contain fewer key- words and are full of anomalous writings, abbreviations, Internet words, acronyms, and dialects, traditional text classification methods are not always suitable for microblogging classification.</a><br><br><a id="s49" onmouseover="over('s49', 'r49')" onmouseout="out('r49')">Previous works have proven that machine learning is an effective method for the study of disaster-related Weibo message classification. Many machine learning algorithms require that the input be represented as a fixed-length feature vector. With regard to text, one of the most common types of fixed-length features is the bag-of-words features. Despite their popularity, bag-of-words features have two major weaknesses: The order of the words is lost and the semantics ignored. Therefore, we introduced a DRW that sig- nificantly outperforms other word representation methods in the neural language model.</a><br><br><a id="s50" onmouseover="over('s50', 'r50')" onmouseout="out('r50')">The distributed representations of words method can capture more syntactic and semantic information than those of previous methods. This method was brought up by Hinton (1986); the basic idea is taking the words as features to map them into a K–d vector space. Then, each word could be a point in K–d space, thus, the text processing task is simplified as vector operation task in a K–d space, the similarity of texts also could be represented by the similarity in vectors space. In this way, the features’ dimension is less than 300 in general. There are a lot of methods to train the distributed representations of words, including latent semantic analysis, latent Dirichlet allocation and Word2vector.</a><br><br><a id="s51" onmouseover="over('s51', 'r51')" onmouseout="out('r51')">Table 1 Training dataset details for Phase 1 Disaster eventsYushu earthquake Beijing rainstorm Yuyao flooding SumLocationYushu Beijing YuyaoData2010/04/14 2012/07/21 2013/10/07Disaster-related messages number3442 2517 3928 9887Disaster non-related messages number427 1022 1128 2577Dataset scale3869 3539 505612,464  1231184 Nat Hazards (2016) 83:1177–1196</a><br><br><a id="s52" onmouseover="over('s52', 'r52')" onmouseout="out('r52')"> Word2vector is an open source tool provided by Google (2013), which combined the deep learning method to train distributed representations of words. Word2vector offers an unsupervised way to train distributed representations of words and could be used by different train data. From Google’s source code, we can find two algorithms (continuous bag-of-words and continuous skip-gram model) to train our N-gram language model. In this paper, according to our research object (online social media data), we trained a continuous skip-gram model with a corpus including 5 million microblogging instances from Weibo. Based on this model, we could transform the words from the Weibo message text into vectors simply.</a><br><br><a id="s53" onmouseover="over('s53', 'r53')" onmouseout="out('r53')">According to previous studies (Bella et al. 2014; Hua et al. 2015), four typical machine learning classification methods, including the category of discriminative classification method, support vector machine, the generative classification approach, Na ̈ıve Bayes, the lazy learning method, K-Nearest Neighbor and random forests were all considered to work well in research on message classification related to disasters. Therefore, we trained four classifiers based on the two text representation methods.</a><br><br><a id="s54" onmouseover="over('s54', 'r54')" onmouseout="out('r54')">Finally, we evaluated the eight classifiers by their accuracy, precision, recall, and F1 score, using a tenfold cross-validation of results. As we can see from Table 2, the new word representation method performed better than a traditional bag-of-words model in our experiment. Compared with the traditional bag-of-words algorithm, which has been used widely in Chinese text mining studies, the new DRW text representation algorithm could improve each classifier’s accuracy by more than 3 %. In particular, the RF classification algorithm with the DRW model had the best classification performance and resulted in 92.37 % accuracy, a good score in Chinese text classification.</a><br><br><a id="s55" onmouseover="over('s55', 'r55')" onmouseout="out('r55')">Figure 2 illustrates the process undergone in this phase.</a><br><br><a id="s56" onmouseover="over('s56', 'r56')" onmouseout="out('r56')">3.3 Phase 2: filter for negative messages</a><br><br><a id="s57" onmouseover="over('s57', 'r57')" onmouseout="out('r57')">Once the messages related to the disaster event have been identified, it is necessary to perform sentiment analysis on all relevant messages to filter negative messages. In sen- timent analysis, algorithms have been developed to automatically detect emotions from text. While some studies identify subjective documents from a large-scale texts data, other research assigns polarity (negative, positive, neutral) to a text. From our summary of the three common sentiment analysis approaches, the feature-based machine learning method is more suitable for our framework. Additionally, as we have discussed, we aim to study negative messages in our sentiment analysis. Hence, there is no need to implement a 2-step</a><br><br><a id="s58" onmouseover="over('s58', 'r58')" onmouseout="out('r58')"> Table 2 Classification experi- mental results for disaster-related Weibo messages</a><br><br><a id="s59" onmouseover="over('s59', 'r59')" onmouseout="out('r59')">Classifiers NB?BOW</a><br><br><a id="s60" onmouseover="over('s60', 'r60')" onmouseout="out('r60')">RF?BOW KNN ? BOW SVM ? BOW NB?DRW RF?DRW KNN ? DRW SVM ? DRW</a><br><br><a id="s61" onmouseover="over('s61', 'r61')" onmouseout="out('r61')">Accuracy</a><br><br><a id="s62" onmouseover="over('s62', 'r62')" onmouseout="out('r62')">0.779284 0.84716 0.837372 0.856467 0.804718 0.9237 0.854621 0.894576</a><br><br><a id="s63" onmouseover="over('s63', 'r63')" onmouseout="out('r63')">F1 score</a><br><br><a id="s64" onmouseover="over('s64', 'r64')" onmouseout="out('r64')">0.853475 0.901637 0.89183 0.906487 0.87416 0.951153 0.907428 0.932595</a><br><br><a id="s65" onmouseover="over('s65', 'r65')" onmouseout="out('r65')">Precision</a><br><br><a id="s66" onmouseover="over('s66', 'r66')" onmouseout="out('r66')">0.90144 0.920992 0.943967 0.938014 0.89413 0.966291 0.916796 0.946185</a><br><br><a id="s67" onmouseover="over('s67', 'r67')" onmouseout="out('r67')">Recall</a><br><br><a id="s68" onmouseover="over('s68', 'r68')" onmouseout="out('r68')">0.810357 0.883079 0.84515 0.87701 0.855062 0.936482 0.89825 0.919389</a><br><br><a id="s69" onmouseover="over('s69', 'r69')" onmouseout="out('r69')">  123Nat Hazards (2016) 83:1177–1196 1185   Real-time Weibo messages stream   API: Zoom in on the potential influenced area   SVM, NB, KNN, RFFig. 2 Phase 1 structureBOW, DRW Identify disaster related messages Disaster related messagessentiment classification process. We simply define all objective messages, positive mes- sages, and neutral messages to be nonnegative messages.</a><br><br><a id="s70" onmouseover="over('s70', 'r70')" onmouseout="out('r70')">To test the performance of our new text representation method and to explore what classification methods are useful in filtering negative messages in a post-disaster situation, we manually labeled 2024 disaster-related nonnegative Weibo messages from the disaster- related Weibo dataset selected in Phase 1 (including 9887 messages). Furthermore, we added another nonnegative Weibo messages dataset, including 2024 messages from the rest of the disaster-related Weibo dataset randomly, and added them to the training dataset.</a><br><br><a id="s71" onmouseover="over('s71', 'r71')" onmouseout="out('r71')">Similar to Phase 1, we applied our new DRW algorithm and traditional BOW algorithm on the SVM, KNN, RF and Na ̈ıve Bayes classifier methods. The results of each algorithm, grouped by the four classification models with different text representation methods, are shown in Table 3.</a><br><br><a id="s72" onmouseover="over('s72', 'r72')" onmouseout="out('r72')"> Table 3 Classification experi- mental results for negative Weibo messages in a post-disaster situation</a><br><br><a id="s73" onmouseover="over('s73', 'r73')" onmouseout="out('r73')">Classifiers NB ? BOW</a><br><br><a id="s74" onmouseover="over('s74', 'r74')" onmouseout="out('r74')">RF?BOW KNN ? BOW SVM ? BOW NB?DRW RF?DRW KNN ? DRW SVM ? DRW</a><br><br><a id="s75" onmouseover="over('s75', 'r75')" onmouseout="out('r75')">Accuracy</a><br><br><a id="s76" onmouseover="over('s76', 'r76')" onmouseout="out('r76')">0.774704 0.817194 0.810524 0.826334 0.812006 0.855484 0.767787 0.8792</a><br><br><a id="s77" onmouseover="over('s77', 'r77')" onmouseout="out('r77')">F1 score</a><br><br><a id="s78" onmouseover="over('s78', 'r78')" onmouseout="out('r78')">0.770969 0.818627 0.806655 0.826805 0.808938 0.85552 0.776934 0.880352</a><br><br><a id="s79" onmouseover="over('s79', 'r79')" onmouseout="out('r79')">Precision</a><br><br><a id="s80" onmouseover="over('s80', 'r80')" onmouseout="out('r80')">0.758399 0.825099 0.790514 0.829051 0.795949 0.855731 0.808794 0.888834</a><br><br><a id="s81" onmouseover="over('s81', 'r81')" onmouseout="out('r81')">Recall</a><br><br><a id="s82" onmouseover="over('s82', 'r82')" onmouseout="out('r82')">0.783963 0.812257 0.823469 0.82457 0.822358 0.855309 0.747489 0.872031</a><br><br><a id="s83" onmouseover="over('s83', 'r83')" onmouseout="out('r83')">  1231186 Nat Hazards (2016) 83:1177–1196</a><br><br><a id="s84" onmouseover="over('s84', 'r84')" onmouseout="out('r84')"> As listed in Table 3, the performance of the four classifiers improved using the new text representation method. The filtering capabilities were more advanced and easily applied when using the classifiers paired with the new DEW algorithm, rather than with the traditional BOW algorithm. However, unlike results obtained in the last phase, the SVM ? DRW classification model was more suitable for the negative messages filtering process. Although there was little difference between the accuracies of RF ? DRW and SVM ? DRW, the SVM ? DRW model had a significantly higher F1 score. Thus, we selected SVM ? DRW to be the suitable filter for Phase 2.</a><br><br><a id="s85" onmouseover="over('s85', 'r85')" onmouseout="out('r85')">Based on the experimental results, the chosen methods for the phases were RF ? DRW and SVM ? DRW for the disaster-related message classifier and the negative message filter, respectively.</a><br><br><a id="s86" onmouseover="over('s86', 'r86')" onmouseout="out('r86')">3.4 Phase 3: negative sentiment analysis and prediction</a><br><br><a id="s87" onmouseover="over('s87', 'r87')" onmouseout="out('r87')">As mentioned in the above discussion, our models were found to be effective in screening negative Weibo messages in a post-disaster situation. We found that many victims like to use Weibo as a platform to express their negative emotions. Thus, we believe that the negative messages posted by victims and filtered by machine learning models can be used to predict abnormal moods held by the victims as a whole and discover potential crisis as a result of the victims’ negative mood.</a><br><br><a id="s88" onmouseover="over('s88', 'r88')" onmouseout="out('r88')">3.4.1 Develop disaster concerned index and negative sentiment index</a><br><br><a id="s89" onmouseover="over('s89', 'r89')" onmouseout="out('r89')">To track the negative and changing public mood after a disaster, it is necessary to analyze and measure changes in relevant microblogging instances based on temporal series. In a time-stamped microblogging collection, we assume microblogs are sorted in ascending order of time and plot all the related negative messages in each time window. At each epoch t, where the period for an epoch can be set arbitrarily at any time, e.g., an hour, day, or year, a stream of microblogging instances fdt1 ; dt2 . . .dtm g of variable size M is received with the publication time stamps preserved. Microblog message d at epoch t is represented as a vector of features, wtd 1⁄4 ðwtd1 ; wtd2 . . .wtdn Þ where the variables in bolded font denote the vectors. Furthermore, we define two indices to measure public negative mood as follows:</a><br><br><a id="s90" onmouseover="over('s90', 'r90')" onmouseout="out('r90')">• Disaster concerned index: This indicates the public attention on the disaster events during a past time window and can be measured via the related microblogging counts. If we define a vertical axis as the time and the horizontal axis shows disaster-related message counts, then the Weibo messages count, varying from the disaster influenced area, could be described as fwðtÞ. The disaster-related messages counts, varying over time, could be described as fdðtÞ. During the time window ðt1 􏰁 t2Þ, the public attention on the disaster events, measured using the disaster concerned index, could be calculated as follows:</a><br><br><a id="s91" onmouseover="over('s91', 'r91')" onmouseout="out('r91')">fwðt1􏰁t2Þ 1⁄4 fwðt2Þ 􏰁 fwðt1Þ ð1Þ fdðt1􏰁t2Þ 1⁄4 fdðt2Þ 􏰁 fdðt1Þ ð2Þ DCIðt1􏰁t2Þ 1⁄4 fwðt1􏰁t2Þ􏰄fdðt1􏰁t2Þ ð3Þ</a><br><br><a id="s92" onmouseover="over('s92', 'r92')" onmouseout="out('r92')">123Nat Hazards (2016) 83:1177–1196 1187</a><br><br><a id="s93" onmouseover="over('s93', 'r93')" onmouseout="out('r93')"> • Negative sentiment index: This value indicates the strength of the public’s fear, dissatisfaction or negative mood about the disaster events during a past time window and can also be measured via the negative microblogging counts.</a><br><br><a id="s94" onmouseover="over('s94', 'r94')" onmouseout="out('r94')">As we defined the x-axis and y-axis, during the defined time window ðt1 􏰁 t2Þ, the variance in the negative Weibo messages count could be described as fnðtÞ. Thus, the negative sentiment index in post-disaster situations could be calculated as follows:NSIðt1􏰁t2Þ 1⁄4 fnðt1􏰁t2Þ􏰄fdðt1􏰁t2Þ ð4ÞTherefore, according to the DCI and NSI indices in the ongoing epochs, we obtain a DCI curve and an NSI curve, representing the change in the NSI and DCI values, over time, separately.</a><br><br><a id="s95" onmouseover="over('s95', 'r95')" onmouseout="out('r95')">3.4.2 Crisis prediction in post-disaster situation based on GM (1, 1)</a><br><br><a id="s96" onmouseover="over('s96', 'r96')" onmouseout="out('r96')">GM (1, 1) is a mathematics model built for series data with exponents and approximate exponential rules. It is one of the most frequently used gray forecasting models, which are mainly adopted in studies on time series forecasting. When GM (1, 1) was created, it was assumed that the fit curve would pass the first data point to confirm the integral constant, and then the forecast formula could be obtained. In addition, GM (1, 1) does not require a large amount of initial data for analysis. It could obtain perfect prediction performance by carrying out an easy calculation process. This model is a time series forecasting model, encompassing a group of differential equations adapted for parameter variance, rather than a first-order differential equation. The difference equations in the model have structures that vary with time, rather than general difference equations. The GM (1, 1) prediction process used in this study is described below.</a><br><br><a id="s97" onmouseover="over('s97', 'r97')" onmouseout="out('r97')">Assume that X0 1⁄4 ðx0 ð1Þ; x0 ð2Þ; . . .; x0 ðnÞÞ where x0 ðkÞ 􏰂 0 is a nonnegative sequence of raw NSI time series data.</a><br><br><a id="s98" onmouseover="over('s98', 'r98')" onmouseout="out('r98')">1. Perform the nonnegative quasi-smooth test</a><br><br><a id="s99" onmouseover="over('s99', 'r99')" onmouseout="out('r99')">dðkÞ1⁄4 x0ðkÞ ; k1⁄42;3;...;n ð5Þ k􏰁1 where</a><br><br><a id="s100" onmouseover="over('s100', 'r100')" onmouseout="out('r100')">Xð1Þ 1⁄4X0D2 1⁄4ðx0ð1Þd2;x0ð2Þd2;...;x0ðnÞd2ÞXk i1⁄41x0ðnÞd2 1⁄4x0ðiÞ; k 1⁄4 1;2;...;n ð6Þ</a><br><br><a id="s101" onmouseover="over('s101', 'r101')" onmouseout="out('r101')">P</a><br><br><a id="s102" onmouseover="over('s102', 'r102')" onmouseout="out('r102')">x0 ðiÞ i1⁄41</a><br><br><a id="s103" onmouseover="over('s103', 'r103')" onmouseout="out('r103')">If dðkþ1Þ\1, k1⁄42;3;...;n􏰁1; dðkÞ21⁄20;0:5􏰃, k1⁄43;4;...;n, then X0 is a nonneg- dðkÞative quasi-smooth sequence. The gray exponential law property of the raw data couldalso be verified using this test.</a><br><br><a id="s104" onmouseover="over('s104', 'r104')" onmouseout="out('r104')">2. Conduct the accumulating generation operator (AGO) process on the initial sequence.</a><br><br><a id="s105" onmouseover="over('s105', 'r105')" onmouseout="out('r105')">1231188Nat Hazards (2016) 83:1177–1196 3.</a><br><br><a id="s106" onmouseover="over('s106', 'r106')" onmouseout="out('r106')">4.</a><br><br><a id="s107" onmouseover="over('s107', 'r107')" onmouseout="out('r107')">D2 is called the 1-AGO sequence of X0. After this step, X0 is more smooth, and it more clearly follows the exponential laws.</a><br><br><a id="s108" onmouseover="over('s108', 'r108')" onmouseout="out('r108')">Generate consecutive neighbors of the mean sequenceAð1Þ 1⁄4 ðað1Þð1Þ; að1Þð2Þ; . . .; að1ÞðnÞÞwhereað1ÞðkÞ1⁄412ðxð1ÞðkÞþxð1Þðk􏰁1ÞÞ; k1⁄42;3;...;n: ð7Þ Build the GM (1, 1) NSI prediction modelx0ðkÞ þ aað1ÞðkÞ 1⁄4 b ð8Þwhere a is an evolution parameter (reflecting the development of the gray system), b is gray endogenous action. To estimate the unknown parameter a, the least-square parameters estimation method is employed.</a><br><br><a id="s109" onmouseover="over('s109', 'r109')" onmouseout="out('r109')">Assume that a^ 1⁄4 1⁄2a; b􏰃T is the parameters column, and 2 x0ð2Þ 3 2 að1Þð2Þ</a><br><br><a id="s110" onmouseover="over('s110', 'r110')" onmouseout="out('r110')">6 x0ð3Þ 7 6 að1Þð3Þ:::Y 1⁄4 6 : 7; B 1⁄4 6 :64 : 75 64 : : 75x0 ðnÞ að1Þ ðnÞ 1Then, the least-squares estimation parameters column of the above GM (1, 1) NSIprediction model x0ðkÞ þ aað1ÞðkÞ 1⁄4 b must satisfya^ 1⁄4 ðBT BÞ􏰁1 BT Y ð10ÞThe differential equation dxð1Þ þ axð1Þ 1⁄4 b is used to acquire the time response function dt</a><br><br><a id="s111" onmouseover="over('s111', 'r111')" onmouseout="out('r111')">ð1Þ 􏰅 ð1Þ b􏰆 􏰁at bx ðtÞ1⁄4 x ð1Þ􏰁a e þa ð11Þ</a><br><br><a id="s112" onmouseover="over('s112', 'r112')" onmouseout="out('r112')">Thus, the time response sequence of the NSI GM (1, 1) prediction model is ð1Þ 􏰅 b􏰆 􏰁aðk􏰁1Þ bx^ ðkÞ1⁄4 x0ð1Þ􏰁a e þa; k1⁄41;2;...;n ð12Þ The restored value is</a><br><br><a id="s113" onmouseover="over('s113', 'r113')" onmouseout="out('r113')">ð1Þ ð1Þx^ðkÞ1⁄4x^ ðkÞ􏰁x^ ðk􏰁1Þ; k1⁄41;2;...;n ð13Þ</a><br><br><a id="s114" onmouseover="over('s114', 'r114')" onmouseout="out('r114')">From Eq. (12), we can gain the prediction value for Xð1Þ, which is needed to restore the prediction value of X0 in the next step. It is then necessary to test the mean relative error between the restored value and X0, and confirm the restored value precision. Finally, we are able to find the DCI and NSI prediction values for the next continuous epoch.</a><br><br><a id="s115" onmouseover="over('s115', 'r115')" onmouseout="out('r115')">12301 31 7: 7 ð9ÞNat Hazards (2016) 83:1177–1196 1189 4 Case studies</a><br><br><a id="s116" onmouseover="over('s116', 'r116')" onmouseout="out('r116')">4.1 Ya’an earthquake dataset</a><br><br><a id="s117" onmouseover="over('s117', 'r117')" onmouseout="out('r117')">In order to to verify the efficiency and practicality of the new system, we used the real- world dataset on the Ya’an earthquake to test system’s performance.</a><br><br><a id="s118" onmouseover="over('s118', 'r118')" onmouseout="out('r118')">The Ya’an earthquake occurred at 08:02 (UTC ? 8 h) on April 20, 2013. The mag- nitude of this earthquake was Ms 7.0 as recorded by the China Earthquake Data Center. The epicenter was located at Lushan County in Ya’an City, Sichuan Province. According to the report from the Ya’an city emergency management office, nearly 99 % of the buildings in epicenter town were destroyed by the earthquake. As a result, clinics, hos- pitals, and other government relief agencies were without running water and electricity. Before 14:30 April 24, 2013, about 196 people were dead, 21 people were missing, and more than 11 thousand people were injured due to the Ya’an earthquake. The Chinese government said it expected as many as 1.5 million individuals and 12 thousands square kilometers of area would be impacted by the quake.</a><br><br><a id="s119" onmouseover="over('s119', 'r119')" onmouseout="out('r119')">Using the data collection method available through the Sina Weibo API, we first cap- tured active Weibo members’ UID from Ya’an City and then obtained their Weibo mes- sages posted from 08:00 April 20, 2013 to 08:00 April 22, 2013. Finally, we collected almost 25,302 Weibo messages as the initial raw dataset.</a><br><br><a id="s120" onmouseover="over('s120', 'r120')" onmouseout="out('r120')">4.2 Experiment</a><br><br><a id="s121" onmouseover="over('s121', 'r121')" onmouseout="out('r121')">By examining the raw data, we found there were many repetitive microblogging instances. These messages are not only no help to our study but also increase the computational complexity. Thus, we removed these messages. After this process, the Ya’an post-earth- quake Weibo message dataset included 20,738 microblogging instances.</a><br><br><a id="s122" onmouseover="over('s122', 'r122')" onmouseout="out('r122')">Next, to generate the feature vectors for each message, the following steps were performed:</a><br><br><a id="s123" onmouseover="over('s123', 'r123')" onmouseout="out('r123')">1. Hashtags, user mentions, and hyperlinks were replaced with a constant string value, but all other punctuations and emoticons were preserved to construct symbols set.</a><br><br><a id="s124" onmouseover="over('s124', 'r124')" onmouseout="out('r124')">2. Text segmentation.</a><br><br><a id="s125" onmouseover="over('s125', 'r125')" onmouseout="out('r125')">3. Stop words and tokens introduced in step (1) were removed in order to produce the set</a><br><br><a id="s126" onmouseover="over('s126', 'r126')" onmouseout="out('r126')">of unigrams, which included the original hashtag tokens, but not user mentions orhyperlinks.</a><br><br><a id="s127" onmouseover="over('s127', 'r127')" onmouseout="out('r127')">4. The final set was composed of the conjoint symbols set and unigrams set.</a><br><br><a id="s128" onmouseover="over('s128', 'r128')" onmouseout="out('r128')">Following these steps, we completed the vectorization of the microblogging instances.</a><br><br><a id="s129" onmouseover="over('s129', 'r129')" onmouseout="out('r129')">Thus, the initial raw messages were described by a feature vector space.</a><br><br><a id="s130" onmouseover="over('s130', 'r130')" onmouseout="out('r130')">As discussed above, to track the public mood as a changing trend, it is necessary to perform Phase 1: identifying disaster-related messages. Based on the developed SVM classifiers, we obtained a Ya’an earthquake-related microblogging dataset including 15,372 messages, which was called the disaster-related dataset.</a><br><br><a id="s131" onmouseover="over('s131', 'r131')" onmouseout="out('r131')">Moreover, we then implement phase 2 with the disaster-related dataset by developing a classifier with novel feature section.</a><br><br><a id="s132" onmouseover="over('s132', 'r132')" onmouseout="out('r132')">To test the performance of the classifiers used in the two phases, we randomly picked 20 % of the data from each dataset and labeled the correct result for each message in the two manmade sample datasets. Sampling results showed that both classifiers perform well</a><br><br><a id="s133" onmouseover="over('s133', 'r133')" onmouseout="out('r133')">1231190 Nat Hazards (2016) 83:1177–1196 and the disaster-related classifier obtained 94.31 % accuracy, while the negative messages identifier had 88.25 % accuracy.</a><br><br><a id="s134" onmouseover="over('s134', 'r134')" onmouseout="out('r134')">Furthermore, we plotted the disaster-related dataset and the negative messages dataset onto the ongoing time windows. Owing to emergency management demand, we deter- mined 1 h as an epoch. From the above calculation processes and formulas, we obtained the DCI curve and NSI curve for the 48 h after the Ya’an earthquake.</a><br><br><a id="s135" onmouseover="over('s135', 'r135')" onmouseout="out('r135')">On the basis of the proposed GM (1,1) prediction model, we took the first three epochs of real data as the initial data and then predicted the DCI and NSI values for the next four epochs. We then took the first four epochs of real data as the initial data and predicted the next five DCI and NSI values epoch values. We continued this process until the values for the final epoch were obtained, at which point this prediction process would stop. As a result, we obtained the DCI prediction curve and NSI prediction curve for the 48 h after the Ya’an earthquake</a><br><br><a id="s136" onmouseover="over('s136', 'r136')" onmouseout="out('r136')">4.3 Incident events discovery</a><br><br><a id="s137" onmouseover="over('s137', 'r137')" onmouseout="out('r137')">The experiment results are described in Figs. 3 and 4. Figure 3 shows the real DCI and prediction DCI over time, while Fig. 4 shows the real NSI and prediction NSI values over time. As we can see, because we used data from the first three epochs as our initial dataset for the GM (1, 1) prediction model, the initial values of the real curve and prediction curve overlap in the figures. The results are not always synchronous. Based on the above analysis,in general, we pay more attention to the epochs with higher real DCI and NSI values. Thus, we introduced the four-quadrant analysis method for analyzing the results.</a><br><br><a id="s138" onmouseover="over('s138', 'r138')" onmouseout="out('r138')">The widely used four-quadrant analysis method is usually performed by weighting the potential relationships between two important indexes of the analysis target. Using a four- quadrant diagram with two index dimensions gives us four distinct scenarios. It is an</a><br><br><a id="s139" onmouseover="over('s139', 'r139')" onmouseout="out('r139')">        Fig. 3 DCI curves     123Nat Hazards (2016) 83:1177–1196 1191                 Fig. 4 NSI curves</a><br><br><a id="s140" onmouseover="over('s140', 'r140')" onmouseout="out('r140')">    excellent tool for analyzing possibilities. On occasion, it can also be a way to present a range of potential scenarios in a logical way. In addition, the method can readily be used to manage potential decisions.</a><br><br><a id="s141" onmouseover="over('s141', 'r141')" onmouseout="out('r141')"> NSI-real-NSI-pre2827 944  34 354 121220 2114 132910 2537 323324 6 4342 41404736 1626 30 75Fig. 5 Four-quadrant distributions of 48 epochs</a><br><br><a id="s142" onmouseover="over('s142', 'r142')" onmouseout="out('r142')">2239 4831 38 19 46 178 45 15 2311DCI-real-DCI-pre1231192 Nat Hazards (2016) 83:1177–1196</a><br><br><a id="s143" onmouseover="over('s143', 'r143')" onmouseout="out('r143')"> The widely used four-quadrant analysis method is usually based on weighting the potential relationships between two important indexes of the analysis target. Using a four- quadrant diagram with the two indexes dimensions gives us four distinct scenarios. It is an excellent tool for analyzing possibilities. Sometimes, it is also a clear way for presenting a range of potential scenarios in logical. Besides, the method can also be readily used to figure out potential decisions. This works when the future focus is more tightly on a system that we can control directly, especially, a decision making.</a><br><br><a id="s144" onmouseover="over('s144', 'r144')" onmouseout="out('r144')">In our study, we define the x-axis as the values of DCI-real–DCI-pre, and the y-axis as the value of NSI-real–NSI-pre, while the origin of coordinates indicates that DCI-real = DCI-pre, and NSI-real = NSI-pre. We then plotted all time epochs onto this given four- quadrant coordinate system by the real and prediction indices.</a><br><br><a id="s145" onmouseover="over('s145', 'r145')" onmouseout="out('r145')">The result is shown in Fig. 5. Because prediction error was built in, although there are other factors that can cause errors as well, we ignored error due to the epochs, in which the likelihood that the real indices value was higher than prediction values was less than 0.03. The numbers within each circle icon correspond to the numbered epoch.</a><br><br><a id="s146" onmouseover="over('s146', 'r146')" onmouseout="out('r146')">Table 4 Abnormal epochs Epochs2013/4/20 11:00–12:002013/4/20 16:00–17:002013/4/20 17:00–18:002013/4/20 19:00–20:002013/4/20 20:00–21:002013/4/21 4:00–5:002013/4/21 5:00–6:002013/4/21 10:00–11:002013/4/21 11:00–12:002013/4/21 10:00–11:002013/4/21 17:00–18:002013/4/21 18:00–19:002013/4/21 22:00–23:002013/4/22 3:00–4:00QuadrantsThe second quadrantThe second quadrantThe first quadrantThe first quadrantThe third quadrantThe first quadrantThe second quadrantThe first quadrantThe first quadrantThe first quadrantThe first quadrant</a><br><br><a id="s147" onmouseover="over('s147', 'r147')" onmouseout="out('r147')">Possible reasons</a><br><br><a id="s148" onmouseover="over('s148', 'r148')" onmouseout="out('r148')">The speech about Ya’an earthquake from the Ya’an Secretary aroused controversyBaoxing County, a bard-hit town, could not be contactedBaoxing County, a bard-hit town, could not be contacted</a><br><br><a id="s149" onmouseover="over('s149', 'r149')" onmouseout="out('r149')">4.5 magnitude aftershock</a><br><br><a id="s150" onmouseover="over('s150', 'r150')" onmouseout="out('r150')">Prime Minister Li Keqiang rushed to the disaster area and made a speech</a><br><br><a id="s151" onmouseover="over('s151', 'r151')" onmouseout="out('r151')">5.0 magnitude aftershock</a><br><br><a id="s152" onmouseover="over('s152', 'r152')" onmouseout="out('r152')">Excessive rescue resulted in traffic jams happened in the main entrance of Baoxing CountyExcessive rescue resulted in traffic jams happened in the main enter of Baoxing</a><br><br><a id="s153" onmouseover="over('s153', 'r153')" onmouseout="out('r153')">5.4 magnitude aftershock</a><br><br><a id="s154" onmouseover="over('s154', 'r154')" onmouseout="out('r154')">4.3 magnitude aftershock 3.8 magnitude aftershock</a><br><br><a id="s155" onmouseover="over('s155', 'r155')" onmouseout="out('r155')">  123Nat Hazards (2016) 83:1177–1196 1193</a><br><br><a id="s156" onmouseover="over('s156', 'r156')" onmouseout="out('r156')"> In our four-quadrant pattern, the first quadrant indicates DCI-real [ DCI-pre, and NSI-real [ NSI-pre. If an epoch is in the first quadrant, we can infer that an incident has recurred that attracted mass attention and caused a high level of negative emotion. The incident being discussed is some emergency or crisis that needs to be addressed imme- diately. In our case study, 11 of 48 epochs were in the first quadrant.</a><br><br><a id="s157" onmouseover="over('s157', 'r157')" onmouseout="out('r157')">As defined, the second quadrant contains all cases for which DCI-real \ DCI-pre, and NSI-real [ NSI-pre. If an epoch is located in the second quadrant, it can be deduced that something occurred during this epoch that raised the negative emotion of the public. Thus, we should pay more attention to these epochs and find the causes. Otherwise, negative emotions will spread quickly and strongly, which could lead to a crisis. In our case study, 4 of the 48 epochs were in the first quadrant.</a><br><br><a id="s158" onmouseover="over('s158', 'r158')" onmouseout="out('r158')">The third quadrant is defined by DCI-real \ DCI-pre, and NSI-real \ NSI-pre. If an epoch is within the third quadrant, circumstances are normal.</a><br><br><a id="s159" onmouseover="over('s159', 'r159')" onmouseout="out('r159')">The third quadrant is defined by DCI-real [ DCI-pre, and NSI-real \ NSI-pre. If an epoch is within the fourth quadrant, it indicates that citizens are concerned about the disaster,but the situation is not associated with excessive negative emotions.</a><br><br><a id="s160" onmouseover="over('s160', 'r160')" onmouseout="out('r160')">Through an in-depth check of the microblogging instances posted in abnormal time windows (the epochs plotted in the first, second, and fourth quadrants), we establish the corresponding possible reasons for these emotions in Table 4.</a><br><br><a id="s161" onmouseover="over('s161', 'r161')" onmouseout="out('r161')">From these results, we find several characteristics about public sentiment in a post- earthquake situation.</a><br><br><a id="s162" onmouseover="over('s162', 'r162')" onmouseout="out('r162')">Immediately after an emergency occurs, such as in earthquake aftershocks, victims are pushed to focus on the disaster itself, which gives rise to public fear and other negative emotions. As found in Table 4, all epochs immediately following aftershocks are plotted in the first quadrant.</a><br><br><a id="s163" onmouseover="over('s163', 'r163')" onmouseout="out('r163')">We find that if a crisis is about to occur, there is a clear trend toward heightened instances of negative emotion. As we can see in Fig. 5, these brewing crises can be turned into real public crises (as shown by the red lines) or could possibly be resolved in time (as shown by the blue lines). Hence, the epochs in the second quadrant represent matters requiring serious attention.</a><br><br><a id="s164" onmouseover="over('s164', 'r164')" onmouseout="out('r164')">5 Conclusion and discussion</a><br><br><a id="s165" onmouseover="over('s165', 'r165')" onmouseout="out('r165')">Weibo data can reflect the mood of users, and thus it is feasible to identify negative messages in a post-disaster situation through data mining. Based on crowd negative emotions prediction, we developed a framework to discover incident events in a post- disaster situation. This framework is constructed using three key phases.</a><br><br><a id="s166" onmouseover="over('s166', 'r166')" onmouseout="out('r166')">First, a classifier was trained to identify disaster-related Chinese microblogging instances. In this paper, a sample of 12,424 messages, evenly positive and negative, was obtained from active users who posted after ‘‘Yushu earthquake,’’ ‘‘Beijing rainstorm,’’ and ‘‘Yuyao flooding’’ were used. We constructed a machine learning model to detect Weibo message concerning the disaster. Based on the new text representation method, DRF, we developed an effective RF ? DRW classifier, which obtained a good result of 94.31 % accuracy in the subsequent case study.</a><br><br><a id="s167" onmouseover="over('s167', 'r167')" onmouseout="out('r167')">In addition, a negative messages filter was constructed to identify negative messages from the mass of disaster-related microblogging instances. The SVM ? DRW combina- tion performed the best of all combinations of word representation methods and machine</a><br><br><a id="s168" onmouseover="over('s168', 'r168')" onmouseout="out('r168')">1231194 Nat Hazards (2016) 83:1177–1196 learning algorithms, meaning that the model can be helpful in finding negative Weibo messages in the post-disaster situation. The following case study showed that the SVM classifier with the novel feature representation method was the most suitable model and resulted in 88.25 % accuracy .</a><br><br><a id="s169" onmouseover="over('s169', 'r169')" onmouseout="out('r169')">In the empirical study, the goal of the previous two phases is to calculate and predict the disaster concerned index and negative sentiment index in ongoing time windows in order to discover potential incident events in a post-disaster situation. Hence, all negative messages must be plotted in continuous epochs according to their posted time. What is more, we define two indexes, DCI and NSI to measure people attention changing overtime. From historical results, we know that the DCI and NSI data and the GM (1, 1) model are a practical and useful method for prediction and can be used to forecast subsequent DCI and NSI values. Therefore, for each epoch, we could obtain the prediction DCI and NSI from GM (1, 1) using historical data and also could have real DCI and NSI values calculated from the actual Weibo platform data. In our Ya’an earthquake case study, we calculated the difference between the real and prediction indices in each epoch and divided the epochs into four quadrants to discover potential incidents. As a result, we find that different incident events in post-disaster situation tend to have different representations in the data. The epochs in which secondary disasters, such as aftershocks, occur usually fall on the first quadrant. However, the epochs in which public opinion events occur are often initially located in the second quadrant, while their future direction is different based on the authority’s reaction. If reactions are poor, the direction may rise and jump to the first quadrant and attract additional attention and fuel negative emotions. Conversely, they could also develop into the fourth quadrant or even fade into the third quadrant via effective emergency information management.</a><br><br><a id="s170" onmouseover="over('s170', 'r170')" onmouseout="out('r170')">In brief, the proposed framework could not only help us to track the victims’ changing emotional states but also discover incidents after the disaster. The platform and framework are also useful in the disaster rescue process. We show that it is reasonable to use a smartphone and social networking information in emergency management. Through effi- cient classification and suitable prediction accuracy, we believe this framework offers us a new perspective on how to observe and analyze the state of victims in post-disaster situations.</a><br><br><a id="s171" onmouseover="over('s171', 'r171')" onmouseout="out('r171')">In its current state, we could discover potential crisis and establish incidents status using our proposed framework. However, we must explore clues on the events manually. Therefore, future work will include creating an automatic system to detect and track topics in post-disaster situations and evaluating authorities’ information management measure- ments according to the victims’ reaction.</a><br>
</div>
<div id="result">
<br><a id="r0" onmouseover="over('r0', 's0')" onmouseout="out('s0')">概要 Twitterに似た中国の人気マイクロブログサービスであるWeiboは，140文字以内のあらゆるトピックに関する何百万もの短いテキストメッセージを読み書きするために利用されています。ユーザーはステータスメッセージを作成し、さまざまなテーマについて意見を述べることもあります。特に、災害発生時には、人々は常にマイクロブログサービスを介して状況に対する自分の状態や感情を表現します。先行研究では、人々のネガティブな感情がその後の事件に結びつく可能性があることが明らかになっている。そのため、災害発生時には、被災者のネガティブな感情に注目する必要があり、国民の恐怖心や危機感といった次の緊急事態を発見するのに役立ちます。本論文では、災害後の状況において、被災者の負の感情が関与する潜在的な事件を検出するために、3つのフェーズを含む構造化されたフレームワークを提案する。第1フェーズでは、膨大でノイズの多いマイクロブログストリームから災害関連のWeiboメッセージを識別する方法に焦点を当て、第2フェーズでは、すべての災害関連マイクロブログからネガティブな感情を持つメッセージをフィルタリングする方法に焦点を当てます。この2つのフェーズに機械学習の手法を導入しました。最後のフェーズでは、被災者のネガティブな感情の変化の傾向をGM(1, 1)に基づいて追跡・予測することで、群衆のネガティブな感情に注目し、災害後の状況におけるインシデントの発見を実行します。亞安地震のケーススタディにより、提案フレームワークが、余震や潜在的な社会的危機などのインシデントの監視において優れた性能を発揮することを実証し、災害救援プロセスや災害後の緊急管理に有意義かつ有用であることを示した。</a><br><br><a id="r1" onmouseover="over('r1', 's1')" onmouseout="out('s1')">キーワード 災害情報 センチメント分析 Weiboテキスト インシデントモニター</a><br><br><a id="r2" onmouseover="over('r2', 's2')" onmouseout="out('s2')">& Hua Bai baihua1727@163.com 1</a><br><br><a id="r3" onmouseover="over('r3', 's3')" onmouseout="out('s3')">ピープルズ・リパブリック・オブ・チャイナ</a><br><br><a id="r4" onmouseover="over('r4', 's4')" onmouseout="out('s4')">School of Management, Harbin Institute of Technology, Harbin 150001,</a><br><br><a id="r5" onmouseover="over('r5', 's5')" onmouseout="out('s5')">123</a><br><br><a id="r6" onmouseover="over('r6', 's6')" onmouseout="out('s6')">1178 Nat Hazards (2016) 83:1177-1196 1 はじめに</a><br><br><a id="r7" onmouseover="over('r7', 's7')" onmouseout="out('s7')">マイクロブログサービスは、その言葉が示すように、ユーザーが自分の近況やニュースなどの情報を共有することができる、素早く、簡単で、手軽なコミュニケーション手段を提供します。2009年5月にサービスを開始して以来、中国で最も人気のあるマイクロブログプラットフォーム「微博（ウェイボー）」は、その場で起こっていることを発見するための普遍的なリアルタイム情報ネットワークとして、中国中の人々に利用されています。</a><br><br><a id="r8" onmouseover="over('r8', 's8')" onmouseout="out('s8')">マイクロブログサービスは、災害を経験したコミュニティから災害事象に関する生の情報を得るための有用な情報源であることが証明されている(Abel et al. 2012; Cameron et al. 2012; Chowdhury et al. 2013; Li and Rao 2010; Alexander 2014)。この新しい情報源は、被災地に適切なサービスを提供する上で、緊急時のコーディネーターやレスポンダーに役立つ可能性があるだけでなく、人々の感情の異常な変化を特定することもできることに留意すべきである。マイクロブログやメッセージに埋め込まれたセンチメント情報は、ソーシャルメディアを利用する人々の感情や行動を示すことができます（Vo and Collier 2013）。緊急事態が発生した場合、当局は、救援決定、緊急物流の調整、一般的なパニックに対する民衆の安心感を得るために、市民のリアルタイムの反応を知る必要があります。マイクロブログサービスの利用が増加しているため、センチメントの変化を簡単かつ迅速に追跡することができます（Lee et al. 特に、中国語では、文中の単語の間に空白がありません。そのため、ユーザーは、Twitterよりも中国のマイクロブログプラットフォームであるWeiboを通じて、より多くの情報を発信することができます。</a><br><br><a id="r9" onmouseover="over('r9', 's9')" onmouseout="out('s9')">2015年9月、Weiboの月間アクティブユーザー数は2220億人に達し、そのうち90％はモバイルクライアントを使ってアカウントにアクセスするメンバー（約2億人のユーザー）でした（Sina Company. Weibo Reports Third Quarter 2015 Results 2015）。このユーザー層、特にモバイルクライアントを利用して、中国のマイクロブログを研究し、国民感情の追跡や災害時の状況認識を目的とすることが可能になりました。</a><br><br><a id="r10" onmouseover="over('r10', 's10')" onmouseout="out('s10')">近年、研究者たちは、災害後の状況でマイクロブログのインスタンスを分析するために使用できる多くの方法を提案してきました。しかし、災害を考慮した先行研究のほとんどは、主に被害状況の監視と情報収集に焦点を当てており、被害者のマイクロブログに対するセンチメント分析は行われていませんでした。そこで本研究では、中国のWeiboサービスのデータを災害後の状況でどのように利用できるかに着目し、特に被害者のネガティブな反応を追跡・予測し、災害後の潜在的なインシデントを発見することに焦点を当てています。</a><br><br><a id="r11" onmouseover="over('r11', 's11')" onmouseout="out('s11')">これまでの研究では、災害に関するメッセージに対して、効果的な災害検知方法や分類アルゴリズムが数多く提案されてきました。これらの研究は、災害時のマイクロブログのインスタンスを分類する際に機械学習が有効であることを示している。しかし、これらの研究では、テキストを表現するために、従来の単語表現法（単語の袋）を使用していました。しかし、新しいアルゴリズムであるDRW（distribution representation of words）は、自然言語処理で用いられる従来の単語表現法（bag of words）よりも優れた性能を持つことが研究で証明されています。そこで、ノイズの多いWeiboストリームからネガティブなメッセージを識別する効率的な方法を得るために、様々な古典的な分類アルゴリズムと2つの新しいテキスト表現方法を比較した。その結果、Weiboのネガティブなメッセージを効率的に検出し、二次災害の特定を支援する機械学習モデルを構築しました。被災者のネガティブな感情状態を正確に測定するために、GM (1, 1)からの予測指標に基づいて、2つの指標を構築しました。</a><br><br><a id="r12" onmouseover="over('r12', 's12')" onmouseout="out('s12')">123Nat Hazards (2016) 83:1177-1196 1179と実データを用いています。その結果、災害後の状況において、インシデント関連の被害者のネガティブな感情をタイムリーかつ効果的に監視することができた。</a><br><br><a id="r13" onmouseover="over('r13', 's13')" onmouseout="out('s13')">本論文の残りの部分は、以下のように構成されています。まず、本研究の動機と基盤を説明するために、（Section.2）関連研究を提供する。次に、提案するフレームワークを詳細に説明する（Section.3）。提案するフレームワークの構造の概要（Section.3.1）を含め、主に3つの構成要素が続く。フェーズ1：災害関連マイクロブログの分類（Section.3.2）、フェーズ2：ネガティブメッセージのフィルタリング（Section.3.3）、フェーズ3：ネガティブセンチメントの分析と予測（Section.3.4）である。次に、雅安地震の事例を用いて、提案したフレームワークの実験を行い（Section.4）、最後に結果と今後の課題について述べる（Section.5）。</a><br><br><a id="r14" onmouseover="over('r14', 's14')" onmouseout="out('s14')">2 関連作品</a><br><br><a id="r15" onmouseover="over('r15', 's15')" onmouseout="out('s15')">マイクロブログのメッセージが情報拡散に大きな影響を与えることから、多くの研究者が災害情報学におけるマイクロブログの応用に注目しています。</a><br><br><a id="r16" onmouseover="over('r16', 's16')" onmouseout="out('s16')">これに関連して、マイクロブログが地震、火災、洪水、その他の災害を特定するのに役立つことが多くの初期研究で示されている。また、Web2.0とTwitterのプラットフォームをベースにして、''Did You Feel it? (USGS. Did you feel it? 2005)、''Toretter''（Sakai et al. 2010, 2013, 2014）、''Twici- dent''（Abel et al. 2012）、''Tweet4act''（Chowdhury et al. 2013）、''CrisisTracker''（Rogstadius et al. 2013）、''Ushahidi platform (http://www.ushahidi.com/)''など、Web2.0やTwitterプラットフォームをベースにしたアプリケーションシステムを開発している。(Omidyar Network 2013）、''Twitter Earthquake Detector''（Earle et al.2011）、''Emergency Situation Awareness''（Yin et al.2012; Robinson et al.2013）、''EARS''（Avvenuti et al.2014）。また、Bellaら（2014）は、Sina Weibo Incidents Monitor（SWIM）と名付けられた中国初の災害検知システムを開発した。この研究と彼らのインターフェースは、緊急イベントの影響を受けた場合、Weiboメンバーの多くが関連するマイクロブログメッセージを投稿することを示している。</a><br><br><a id="r17" onmouseover="over('r17', 's17')" onmouseout="out('s17')">マイクロブログは、災害救助のためのサービスであると同時に、当局が感情を助長し、偽情報に対抗するためのツールにもなりうる(Hughes and Palen 2009)。Viewegら(2010)は、Red River Valley FloodingのTweetデータセットを研究することで、災害イベントが起こった後の民間人の反応を知るためにTwitterを利用できると主張している。関連する同様の調査結果[KCIS](Ma et al. 2013)によると、Weiboプラットフォームは、災害後に展開される状況を投稿する情報通信サービスとしても広く利用されている。例えば、一人の被災者が無事であった場合、進行中のウェイボーの話題は、災害事象による感情や当局の対応策に対する意見などです。</a><br><br><a id="r18" onmouseover="over('r18', 's18')" onmouseout="out('s18')">このセンチメント分類の分野では、多くの研究が行われています。従来、ほとんどの研究は、レビューなどの大きなテキストの分析に集中していました。マイクロブログの急速な発展のおかげで、ますます多くの研究者が、ネットワーク情報の感情分析技術（自然言語処理や機械学習など）をマイクロブログのテキスト感情分析に導入しようとしています。Mostafa (2013) は、いくつかの企業の顧客のツイートを調査し、顧客がさまざまな有名製品に対してポジティブな感情とネガティブな感情を持っていることを発見しました。Thewallら(2011)は、緊急時にTwitterユーザの感情の強さを変化させることを提案した。一般的に、マイクロブログの感情を特定する方法には、主に以下のような種類があります。</a><br><br><a id="r19" onmouseover="over('r19', 's19')" onmouseout="out('s19')">1. 感情語辞書ベースの方法。この方法では、無関係な単語や文書の大部分を取り除くことができます。そのため，ノイズの多い大規模なオンライン検索に適しています．</a><br><br><a id="r20" onmouseover="over('r20', 's20')" onmouseout="out('s20')">1231180Nat Hazards (2016) 83:1177-1196 2.</a><br><br><a id="r21" onmouseover="over('r21', 's21')" onmouseout="out('s21')">3.</a><br><br><a id="r22" onmouseover="over('r22', 's22')" onmouseout="out('s22')">ソーシャルメディアのデータセットです。英語の感情語辞書「Google Profiles of Mood States」や「Linguistic Inquiry and Word Count」と同様に、中国語の感情語辞書「Hownet and DUTIR」(Xu et al. 2008)が広く使われています。しかし、英語とは異なり、中国語は分析的な言語です。ほとんどの中国語の文章は形容詞や副詞ではなく感情を表現しているので、このアプローチは中国語のテキストの感情分析ではあまりうまくいきません。</a><br><br><a id="r23" onmouseover="over('r23', 's23')" onmouseout="out('s23')">ルールベースの方法。文章の中には、かなりの量の定型的なコロケーションやフレーズが存在しています。1つの文は様々な段階のプロセスであるため、ルールベースの感情法は文の感情分析を実施するのに役立ちます。しかし、中国語は多様な言語であり、特にオンラインのマイクロブログの文章では、同音異義語を使うメンバーが多い。多くのメンバーが同音異義語、方言、顔文字、さらにはオンライン言語を使用しており、感情ルールベース法による感情分類作業に大きな困難をもたらしています(Neviarouskaya et al. 2011)。</a><br><br><a id="r24" onmouseover="over('r24', 's24')" onmouseout="out('s24')">機械学習の手法。この手法は、人工知能（AI）で広く使われています。Pang and Lee (2008) は、この経験的手法を初めてテキストのセンチメント分析に導入し、映画レビューのデータセットに基づいて、より良い結果を得た。Aisopos et al. (2012)は，マイクロブログにおけるセンチメント分析の難しさの一つとして，ソーシャルメディアツール（Twitter）に見られる様々な短文や不規則な情報表現のメッセージテキストが原因で，テキストがまばらになることを指摘している。機械学習アプローチは、マイクロブログのテキストから適切な特徴を選択し、プラットフォームが提供する特性を利用することで、この問題を克服することを目的としています。その特徴とは、N-gram、顔文字、句読点、リツイート、人質などが考えられます（Barbosa and Feng 2010）。</a><br><br><a id="r25" onmouseover="over('r25', 's25')" onmouseout="out('s25')">現在、ハリケーン(Mandel et al. 2012)やガス爆発(Naggy and Stamberger 2012)などの災害時におけるマイクロブログのセンチメント分析に注目が集まっています。この2つの研究は、いずれも機械学習法を用いて英語データのセンチメント分析を行っています。しかし、中国の研究者の多くは、この研究分野を十分に考慮していませんでした。Quら(2010)とZhouら(2013)は、玉樹(中国青海省)地震後の中国のWeiboメッセージに注目し、Quらは災害後のWeiboメッセージの内容、傾向、拡散経路を分析し、Zhouらは災害対応のために災害後のWeiboメッセージをベイズモデルで分類している。しかし、これらの研究は、災害後のマイクロブログの感情分析に関する研究を無視しています。幸いなことに、Weiboのセンチメント分析に関しては、利用可能な研究が豊富にあります。多くの研究者は、適切な特徴を選択し、実験データを分類するために機械学習法を適用しており、このアプローチはマイクロブログで非常に優れた性能を示している。そこで、本研究では、Weiboの感情分析を行うために、特徴に基づいた機械学習法を選択しました。</a><br><br><a id="r26" onmouseover="over('r26', 's26')" onmouseout="out('s26')">インタラクティブな多様性と迅速なコミュニケーションの特性により、オンライン・ソーシャル・メディア・プラットフォームは、緊急危機管理においてより重要になってきています。オンライン・ソーシャルメディアは、個人や組織が日常的なチャットツールから災害情報を求め、共有するための重要なプラットフォームとなっています（Cheng et al.2011）。災害発生後、オンラインユーザーは災害イベントに関するストーリーを共有したり、自分の視点を示したりする傾向があり、その結果、大規模なリアルタイムの危機情報データは、世論を追跡する簡単な方法を提供している(Rowe et al. (2011))。2013年に中国の新浪微博（Sina Weibo）で発表された「Top-100 Crisis Events」には、災害に関する項目が17件も含まれており、災害危機管理におけるソーシャルメディアへの注目度が高まっています。坂木氏は、ネットユーザーを社会的なセンサーとしてとらえ、異種ネットワーク（フォロワーネットワークと情報フローネットワーク）を用いて、以下のような研究を行っています。</a><br><br><a id="r27" onmouseover="over('r27', 's27')" onmouseout="out('s27')">123Nat Hazards (2016) 83:1177-1196 1181 災害時のツイッタ-情報通信網。災害時には、情報伝達経路が他のトピックよりも短くなると主張している(Sakai et al. 2010)。さらに、研究者は、災害時のソーシャルメディアにおいて、噂を発見したり（Takahashi and Igata 2012）、オンライン情報の信頼性を予測したり（Castillo and Mendoza 2013）することができる。実際、ソーシャルメディア自体が風評の拡散を抑制するメカニズムを提供しており、MendozaらやOhらは、ユーザーが信頼性の低い情報源からの情報に疑問を抱くことを示しています(Mendoza et al. 2010; Oh et al. 2010)。</a><br><br><a id="r28" onmouseover="over('r28', 's28')" onmouseout="out('s28')">また、災害時のソーシャルメディアは、組織のイメージ回復や社会的認知に影響を与えるという、従来の危機管理活動においても重要な役割を果たしています（Utz et al. しかし、ソーシャルメディアは双方向のコミュニケーション・プラットフォームであり、このツールを使って世論を集めることもできます（Heath et al.2009）。残念ながら、先行研究の多くは、組織のイメージを完璧にするという機能に焦点を当てており、ソーシャルメディアを従来の危機管理コミュニケーションの補助ツールとしてしか捉えていません(Austin et al. 2012)。</a><br><br><a id="r29" onmouseover="over('r29', 's29')" onmouseout="out('s29')">これらの研究を基に、本研究では、中国のWeiboメッセージを用いて、災害後の被災者の感情を追跡するフレームワークを開発し、当局による災害感情支援や二次的な緊急対応に利用することができる。</a><br><br><a id="r30" onmouseover="over('r30', 's30')" onmouseout="out('s30')">3 Weiboテキストに基づく災害後のインシデント発見フレームワーク</a><br><br><a id="r31" onmouseover="over('r31', 's31')" onmouseout="out('s31')">3.1 フレームワークの構造</a><br><br><a id="r32" onmouseover="over('r32', 's32')" onmouseout="out('s32')">我々のフレームワークを構築するために、我々は、イベントとソーシャルネットワーク上で表現される意見の強さの変化との関係に関するThelwallら（2011）の分析を利用しています。彼らの研究によると、Twitter上でコメントされたイベントの重要性が、否定的なレビューの強度の増加と関連しているという証拠があることがわかりました。我々は、災害後の状況における関連メッセージの分類(Vieweg 2012)に関する既存の知見も活用し、以下のような動機と課題を提案します。</a><br><br><a id="r33" onmouseover="over('r33', 's33')" onmouseout="out('s33')">(a) 災害後に変化する感情を分析することを目的とした場合、最初の重要なタスクは、Weiboメッセージが現在の災害イベントに関連しているかどうかを認識することです。災害が発生すると、大量のWeiboメッセージが押し寄せてきます。そのため、関連するメッセージを効率的かつ迅速に検出する分類器を備える必要があります。</a><br><br><a id="r34" onmouseover="over('r34', 's34')" onmouseout="out('s34')">(b) 否定的なメッセージを識別するための適切な特徴と分類アルゴリズムを選択する。Weiboのデータは大規模でノイズが多いため、被害者の異常な感情を追跡するためには、ポジティブでニュートラルな関連メッセージをフィルタリングして、ネガティブなメッセージだけに焦点を当てることが有意義です。そのため、Weiboの大量のメッセージからネガティブなメッセージを短時間で識別するための適切な分類器を構築する必要があります。</a><br><br><a id="r35" onmouseover="over('r35', 's35')" onmouseout="out('s35')">(c) 被害者の感情の変化の傾向を追跡し、潜在的な事件を発見するための経験的な尺度を開発する。一般的に、被害者のネガティブな感情は時間とともに変化し、その変化はWeiboのメッセージによって発見される可能性があります。そこで、被害者のネガティブな感情をマイクロブログで測定し、その変化の傾向を予測する方法を見つけたいと考えています。</a><br><br><a id="r36" onmouseover="over('r36', 's36')" onmouseout="out('s36')">1231182 Nat Hazards (2016) 83:1177-1196</a><br><br><a id="r37" onmouseover="over('r37', 's37')" onmouseout="out('s37')"> 上記の分析に基づき、我々が提案する災害後の状況における被災者の負の感情の追跡とインシデントの発見のためのフレームワークは、3つのフェーズで構成されています。</a><br><br><a id="r38" onmouseover="over('r38', 's38')" onmouseout="out('s38')">本フレームワークの概要を図1に示します。</a><br><br><a id="r39" onmouseover="over('r39', 's39')" onmouseout="out('s39')">3.2 フェーズ1：災害関連メッセージの特定</a><br><br><a id="r40" onmouseover="over('r40', 's40')" onmouseout="out('s40')">Weiboにはアプリケーション・プログラミング・インターフェース（API）があり、災害イベント発生後の中国のマイクロブロギング・メッセージの収集を容易にしています。マイクロブログのキャプチャには、WeiboのAPIをデータソースとして使用しています。</a><br><br><a id="r41" onmouseover="over('r41', 's41')" onmouseout="out('s41')">public_timeline''インタフェースでは、最新のWeibo公開メッセージの量を取得することができます。原則として、最新の200件のパブリック・メッセージが返され、1時間あたりのリクエスト数は150件に制限されています。このエンドポイントは24秒ごとにポーリングされます。簡単に言うと、このインターフェースは1分間に470件、1時間に約28,000件のメッセージを提供することができます。</a><br><br><a id="r42" onmouseover="over('r42', 's42')" onmouseout="out('s42')">       Weibo Weibo Weibo Weibo Crawling microblogging flow from Weibo Application Programming InterfaceWeibo Weibo Related messagesPhase 1: identify disaster related messagesPhase 2: negative messages filterPhase 3: negative sentiment analysis and prediction Weibo WeiboNegative messagesWeiboUn-negative messages WeiboEpoch 1Weibo</a><br><br><a id="r43" onmouseover="over('r43', 's43')" onmouseout="out('s43')">エポック2</a><br><br><a id="r44" onmouseover="over('r44', 's44')" onmouseout="out('s44')">  各エポックの「災害不安指数」と「負の感情指数」を算出し、実データと予測データの違いを把握して、潜在的なインシデントを発見する。</a><br><br><a id="r45" onmouseover="over('r45', 's45')" onmouseout="out('s45')">      図1フレームワークの構造Weibo微博未関連メッセージ123ReportReportReportNat Hazards (2016) 83:1177-1196 1183</a><br><br><a id="r46" onmouseover="over('r46', 's46')" onmouseout="out('s46')"> しかし、これらのリアルタイムのWeibo公開メッセージは、中国全土から発信されています。そこで、被害者の異常な感情を追跡し、データの規模を縮小することを目的として、影響を受ける可能性のある地域のパブリックメッセージを選択し、Weiboメンバーのジオロケーション機能を使ってターゲットデータを分類することができました。</a><br><br><a id="r47" onmouseover="over('r47', 's47')" onmouseout="out('s47')">異なる分類アルゴリズムを比較するためには、学習データセットを収集してラベル付けする必要があります。しかし、Weiboの「public_timeline」インターフェースは、最新のメッセージを提供するだけなので、過去のメッセージを収集してトレーニングデータセットを構築するための別の方法を見つける必要がありました。新浪微博社では、ユーザーが毎日ログインしているかどうかに基づいて「デイリー・アクティブ・ユーザー」を定義しています。Sina Weibo社のDAUの定義によると、私たちは、被災地にいるDaily Active UsersのUIDを取得し、災害発生後24時間以内に投稿されたメッセージを収集しました。このようにして，玉樹地震データセット（3442メッセージ），北京暴雨データセット（2517メッセージ），夕陽洪水データセット（3928メッセージ）を含む，合計12,464メッセージを収集しました。さらに、異なる分類アルゴリズムの性能を比較するために、手動でメッセージを調査し、災害関連のメッセージ（ポジティブ）と非関連のメッセージ（ネガティブ）のいずれかにラベル付けしました。この作業は、中国語を母国語とする2人の著者によって行われました。それぞれの結果を比較し、合意を得た。表1に示すように、9887通の災害関連メッセージが発見されました。</a><br><br><a id="r48" onmouseover="over('r48', 's48')" onmouseout="out('s48')">初期段階では、ストリーム全体から災害関連のメッセージを識別するための自動分類システムが必要です。マイクロブログのインスタンスには、キーワードが少なく、変則的な文章、略語、インターネット用語、頭字語、方言などが多く含まれているため、従来のテキスト分類法はマイクロブログの分類には必ずしも適していない。</a><br><br><a id="r49" onmouseover="over('r49', 's49')" onmouseout="out('s49')">これまでの研究で、災害関連のWeiboメッセージ分類の研究には、機械学習が有効な手法であることが証明されています。多くの機械学習アルゴリズムでは、入力を固定長の特徴ベクトルとして表現することが求められます。テキストに関しては、固定長の特徴の中で最も一般的なものの1つが、単語の袋（bag-of-words）特徴です。bag-of-words特徴は人気がありますが、2つの大きな弱点があります。単語の順序が失われ、セマンティクスが無視されてしまうのである。そこで私たちは、ニューラル言語モデルにおいて、他の単語表現手法を大幅に上回るDRWを導入しました。</a><br><br><a id="r50" onmouseover="over('r50', 's50')" onmouseout="out('s50')">単語の分散表現法は、これまでの方法に比べて、より多くの統語的・意味的情報を捉えることができる。この方法はHinton (1986)によって提唱されたもので、基本的な考え方は、単語を特徴として捉え、それをK-dベクトル空間にマッピングすることである。これにより、テキスト処理タスクはK-d空間におけるベクトル演算タスクとして単純化され、テキストの類似性もベクトル空間における類似性で表される。このようにして、特徴量の次元は一般的に300以下になります。単語の分散表現を学習する方法には、潜在的意味解析、潜在的ディリクレ配分、Word2vectorなどがあります。</a><br><br><a id="r51" onmouseover="over('r51', 's51')" onmouseout="out('s51')">表1 フェーズ1のトレーニングデータセットの詳細 災害イベントYushu earthquake Beijing rainstorm Yuyao flooding SumLocationYushu Beijing YuyaoData2010/04/14 2012/07/21 2013/10/07災害関連メッセージ数3442 2517 3928 9887災害非関連メッセージ数427 1022 1128 2577Dataset scale3869 3539 505612,464 1231184 Nat Hazards (2016) 83:1177-1196</a><br><br><a id="r52" onmouseover="over('r52', 's52')" onmouseout="out('s52')"> Word2vectorは、Google (2013)が提供するオープンソースのツールで、深層学習法を組み合わせて単語の分散表現を学習します。Word2vectorは、教師なしで単語の分散表現を学習する方法を提供しており、さまざまな学習データに利用することができます。Googleのソースコードからは、N-gram言語モデルを学習するための2つのアルゴリズム（continuous bag-of-wordsとcontinuous skip-gramモデル）を見つけることができます。本論文では、我々の研究対象（オンライン・ソーシャルメディア・データ）に基づき、Weiboからの500万のマイクロブログ・インスタンスを含むコーパスを用いて、連続スキップグラム・モデルを学習しました。このモデルに基づいて、Weiboのメッセージテキストから単語を簡単にベクトルに変換することができました。</a><br><br><a id="r53" onmouseover="over('r53', 's53')" onmouseout="out('s53')">先行研究（Bella et al. 2014; Hua et al. 2015）によると、機械学習による代表的な4つの分類法、すなわち、識別的分類法のカテゴリーであるサポートベクターマシン、生成的分類法のカテゴリーであるNa ̈ve Bayes、遅延学習法のカテゴリーであるK-Nearest Neighbor、ランダムフォレストは、いずれも災害に関連するメッセージ分類の研究に有効に働くと考えられていた。そこで、2つのテキスト表現方法に基づいて、4つの分類器を学習しました。</a><br><br><a id="r54" onmouseover="over('r54', 's54')" onmouseout="out('s54')">最後に，結果の10倍のクロスバリデーションを用いて，8つの分類器の正確さ，精度，リコール，F1スコアで評価した．表2からわかるように，今回の実験では，新しい単語表現法は，従来の単語の袋詰めモデルよりも優れた性能を示した．中国語のテキストマイニングの研究で広く使われている従来の bag-of-words アルゴリズムと比較して，新しい DRW テキスト表現アルゴリズムは，各分類器の精度を 3 % 以上向上させることができた．特に，DRWモデルを用いたRF分類アルゴリズムは，最も優れた分類性能を示し，92.37 %の精度となり，中国語テキストの分類において良好なスコアとなった．</a><br><br><a id="r55" onmouseover="over('r55', 's55')" onmouseout="out('s55')">図2は、この段階でのプロセスを示したものです。</a><br><br><a id="r56" onmouseover="over('r56', 's56')" onmouseout="out('s56')">3.3 フェーズ2：ネガティブなメッセージのフィルタリング</a><br><br><a id="r57" onmouseover="over('r57', 's57')" onmouseout="out('s57')">災害イベントに関連するメッセージが特定されたら、否定的なメッセージをフィルタリングするために、すべての関連メッセージに対してセンチメント分析を行う必要があります。センチメント分析では，テキストから感情を自動的に検出するアルゴリズムが開発されている．大規模なテキストデータから主観的な文書を特定する研究もあれば、テキストに極性（ネガティブ、ポジティブ、ニュートラル）を割り当てる研究もあります。一般的な3つのセンチメント分析アプローチをまとめてみると、特徴ベースの機械学習法が我々のフレームワークに適している。さらに、これまで述べてきたように、我々のセンチメント分析では否定的なメッセージを研究することを目的としている。したがって、2ステップの機械学習を実装する必要はありません。</a><br><br><a id="r58" onmouseover="over('r58', 's58')" onmouseout="out('s58')"> 表2 災害関連のWeiboメッセージの分類実験結果</a><br><br><a id="r59" onmouseover="over('r59', 's59')" onmouseout="out('s59')">クラシファイア NB?BOW</a><br><br><a id="r60" onmouseover="over('r60', 's60')" onmouseout="out('s60')">RF?BOW KNN ? BOW SVM ? bow nb?drw rf?drw knn ? DRW SVM ? DRW</a><br><br><a id="r61" onmouseover="over('r61', 's61')" onmouseout="out('s61')">精度</a><br><br><a id="r62" onmouseover="over('r62', 's62')" onmouseout="out('s62')">0.779284 0.84716 0.837372 0.856467 0.804718 0.9237 0.854621 0.894576</a><br><br><a id="r63" onmouseover="over('r63', 's63')" onmouseout="out('s63')">F1スコア</a><br><br><a id="r64" onmouseover="over('r64', 's64')" onmouseout="out('s64')">0.853475 0.901637 0.89183 0.906487 0.87416 0.951153 0.907428 0.932595</a><br><br><a id="r65" onmouseover="over('r65', 's65')" onmouseout="out('s65')">プレシジョン</a><br><br><a id="r66" onmouseover="over('r66', 's66')" onmouseout="out('s66')">0.90144 0.920992 0.943967 0.938014 0.89413 0.966291 0.916796 0.946185</a><br><br><a id="r67" onmouseover="over('r67', 's67')" onmouseout="out('s67')">リコール</a><br><br><a id="r68" onmouseover="over('r68', 's68')" onmouseout="out('s68')">0.810357 0.883079 0.84515 0.87701 0.855062 0.936482 0.89825 0.919389</a><br><br><a id="r69" onmouseover="over('r69', 's69')" onmouseout="out('s69')">  123Nat Hazards (2016) 83:1177-1196 1185 リアルタイムのWeiboメッセージストリームAPI。SVM, NB, KNN, RFFig.2 フェーズ1の構造BOW, DRW 災害関連メッセージの識別 災害関連メッセージのセンチメント分類プロセス。ここでは、客観的なメッセージ、肯定的なメッセージ、中立的なメッセージをすべて非負のメッセージと単純に定義する。</a><br><br><a id="r70" onmouseover="over('r70', 's70')" onmouseout="out('s70')">我々の新しいテキスト表現法の性能をテストし、災害後の状況でネガティブなメッセージをフィルタリングするためにどのような分類法が有効かを探るために、フェーズ1で選択した災害関連Weiboデータセット（9887件を含む）から2024件の災害関連の非ネガティブなWeiboメッセージに手動でラベルを付けた。さらに、残りの災害関連Weiboデータセットから2024件のメッセージを含むもう一つの非ネガティブWeiboメッセージデータセットをランダムに追加し、学習データセットに加えました。</a><br><br><a id="r71" onmouseover="over('r71', 's71')" onmouseout="out('s71')">フェーズ1と同様に，新しいDRWアルゴリズムと従来のBOWアルゴリズムをSVM，KNN，RF，Na ̈ve Bayesの各分類法に適用した。各アルゴリズムの結果を、テキスト表現方法の異なる4つの分類モデルでグループ化して、表3に示しました。</a><br><br><a id="r72" onmouseover="over('r72', 's72')" onmouseout="out('s72')"> 表3 災害後のネガティブなWeiboメッセージの分類実験結果</a><br><br><a id="r73" onmouseover="over('r73', 's73')" onmouseout="out('s73')">クラシファイア NB ? BOW</a><br><br><a id="r74" onmouseover="over('r74', 's74')" onmouseout="out('s74')">RF?BOW KNN ? BOW SVM ? bow nb?drw rf?drw knn ? DRW SVM ? DRW</a><br><br><a id="r75" onmouseover="over('r75', 's75')" onmouseout="out('s75')">精度</a><br><br><a id="r76" onmouseover="over('r76', 's76')" onmouseout="out('s76')">0.774704 0.817194 0.810524 0.826334 0.812006 0.855484 0.767787 0.8792</a><br><br><a id="r77" onmouseover="over('r77', 's77')" onmouseout="out('s77')">F1スコア</a><br><br><a id="r78" onmouseover="over('r78', 's78')" onmouseout="out('s78')">0.770969 0.818627 0.806655 0.826805 0.808938 0.85552 0.776934 0.880352</a><br><br><a id="r79" onmouseover="over('r79', 's79')" onmouseout="out('s79')">プレシジョン</a><br><br><a id="r80" onmouseover="over('r80', 's80')" onmouseout="out('s80')">0.758399 0.825099 0.790514 0.829051 0.795949 0.855731 0.808794 0.888834</a><br><br><a id="r81" onmouseover="over('r81', 's81')" onmouseout="out('s81')">リコール</a><br><br><a id="r82" onmouseover="over('r82', 's82')" onmouseout="out('s82')">0.783963 0.812257 0.823469 0.82457 0.822358 0.855309 0.747489 0.872031</a><br><br><a id="r83" onmouseover="over('r83', 's83')" onmouseout="out('s83')">  1231186 Nat Hazards (2016) 83:1177-1196</a><br><br><a id="r84" onmouseover="over('r84', 's84')" onmouseout="out('s84')"> 表3に示すように，4つの分類器の性能は，新しいテキスト表現方法を用いた場合に向上した。また，従来のBOWアルゴリズムではなく，新しいDEWアルゴリズムと組み合わせた分類器を使用した場合には，フィルタリング機能がより高度になり，簡単に適用できるようになりました。しかし，前回の結果とは異なり，SVM ? DRW分類モデルは、ネガティブなメッセージのフィルタリング処理に適していました。RF ? DRWとSVM ? DRWの精度にはほとんど差がありませんでしたが，SVM ? DRWモデルの方がF1スコアが有意に高かった。そのため，SVM ? DRWをフェーズ2に適したフィルタとして選択しました。</a><br><br><a id="r85" onmouseover="over('r85', 's85')" onmouseout="out('s85')">実験結果に基づき、フェーズに応じて選ばれた手法は、RF ? DRW，SVM ? DRWが選ばれました。それぞれ、災害関連メッセージの分類器とネガティブメッセージのフィルタに使われました。</a><br><br><a id="r86" onmouseover="over('r86', 's86')" onmouseout="out('s86')">3.4 フェーズ3：ネガティブセンチメントの分析と予測</a><br><br><a id="r87" onmouseover="over('r87', 's87')" onmouseout="out('s87')">上記の議論で述べたように、我々のモデルは、災害後の状況でネガティブなWeiboメッセージをスクリーニングするのに有効であることがわかりました。被災者の多くは、自分のネガティブな感情を表現するプラットフォームとしてWeiboを利用したいと考えていることがわかりました。このように、被災者が投稿したネガティブなメッセージを機械学習モデルでフィルタリングすることで、被災者全体の異常な気分を予測し、被災者のネガティブな気分に起因する潜在的な危機を発見することができると考えています。</a><br><br><a id="r88" onmouseover="over('r88', 's88')" onmouseout="out('s88')">3.4.1 災害懸念指数とネガティブセンチメント指数の開発</a><br><br><a id="r89" onmouseover="over('r89', 's89')" onmouseout="out('s89')">災害後の人々のネガティブなムードや変化を追跡するためには、時系列に基づいて関連するマイクロブログのインスタンスの変化を分析・測定することが必要である。タイムスタンプ付きのマイクロブログコレクションでは、マイクロブログが時間の昇順にソートされていると仮定し、各時間ウィンドウで関連するすべてのネガティブメッセージをプロットする。各エポックt（エポックの期間は1時間、1日、1年など任意に設定可能）において、可変サイズMのマイクロブログ・インスタンスfdt1 ; dt2 . . .dtm gのストリームが、パブリケーション・タイム・スタンプを保存した状態で受信される。エポック t のマイクロブログメッセージ d は、特徴量のベクトル wtd 1⁄4 ðwtd1 ; wtd2 . . .wtdn Þ として表される（太字フォントの変数はベクトルを表す）。さらに、世間のネガティブな気分を測定するために、以下の2つの指標を定義する。</a><br><br><a id="r90" onmouseover="over('r90', 's90')" onmouseout="out('s90')">- 災害に関する指数。これは、過去の時間枠の中での災害イベントに対する人々の注目度を示すもので、関連するマイクロブログの数によって測定することができる。縦軸を時間、横軸を災害関連のメッセージ数とすると、災害の影響を受けた地域で変化するWeiboメッセージ数は、fwðtÞと表現できる。また、災害関連メッセージ数の時間変化は、fdðtと表現できる。時間窓 ðt1 t2 の間、災害に関するインデックスを用いて、災害事象に対する社会の注目度を次のように計算することができる。</a><br><br><a id="r91" onmouseover="over('r91', 's91')" onmouseout="out('s91')">fwðt1t2Þ 1⁄4 fwðt2Þ fwðt1Þ ð1Þ fdðt1t2 1⁄4 fdt2Þ fdðt1Þ ð2Þ DCIðt1t2Þ 1⁄4 fwðt1t2Þfdðt1t2Þ ð3Þ です。</a><br><br><a id="r92" onmouseover="over('r92', 's92')" onmouseout="out('s92')">123Nat Hazards (2016) 83:1177-1196 1187</a><br><br><a id="r93" onmouseover="over('r93', 's93')" onmouseout="out('s93')"> - ネガティブセンチメント指数。この値は、過去の時間枠における災害事象に対する人々の恐怖、不満、ネガティブな気分の強さを示すもので、ネガティブなマイクロブログのカウントを介して測定することもできる。</a><br><br><a id="r94" onmouseover="over('r94', 's94')" onmouseout="out('s94')">X 軸と Y 軸を定義すると、定義された時間枠 ðt1 t2 の間、否定的な Weibo メッセージ数の分散は fnðt と表される。NSIðt1t2Þ 1⁄4 fnðt1t2Þ ffdðt1t2Þ ð4Þ したがって、DCI と NSI の指標に応じて、DCI カーブと NSI カーブが得られ、NSI と DCI の値の経時的な変化を別々に表すことができる。</a><br><br><a id="r95" onmouseover="over('r95', 's95')" onmouseout="out('s95')">3.4.2 GM(1, 1)に基づく災害後の危機予測</a><br><br><a id="r96" onmouseover="over('r96', 's96')" onmouseout="out('s96')">GM (1, 1) は、指数と近似的な指数規則を持つ系列データのために構築された数学モデルです。これは、最も頻繁に使用されるグレーの予測モデルの一つで、主に時系列予測の研究で採用されています。GM(1, 1)が作られたとき、フィットカーブが最初のデータポイントを通過して積分定数を確認し、予測式が得られることが想定されていました。また、GM(1,1)は、分析のために大量の初期データを必要としません。また、GM(1,1)は解析に大量の初期データを必要とせず、簡単な計算プロセスで完璧な予測性能を得ることができます。このモデルは、一次微分方程式ではなく、パラメータ分散に適応した微分方程式群を包含する時系列予測モデルである。このモデルの差分方程式は、一般的な差分方程式ではなく、時間とともに変化する構造を持っています。本研究で用いたGM（1，1）予測プロセスは以下の通りです。</a><br><br><a id="r97" onmouseover="over('r97', 's97')" onmouseout="out('s97')">X0 1⁄4 ðx0 ð1Þ; x0 ð2Þ; ...; x0 ðnÞ ここで x0 ðkÞ 0 は生の NSI 時系列データの非負のシーケンスであると仮定する。</a><br><br><a id="r98" onmouseover="over('r98', 's98')" onmouseout="out('s98')">1. 非負の準平滑性テストの実行</a><br><br><a id="r99" onmouseover="over('r99', 's99')" onmouseout="out('s99')">dðkÞ1⁄4 x0ðkÞ ; k1⁄42;3;...;n ð5Þ k1 ここで</a><br><br><a id="r100" onmouseover="over('r100', 's100')" onmouseout="out('s100')">Xð1Þ 1⁄4X0D2 1⁄4ðx0ð1Þd2;x0ð2Þd2;...x0ðnÞd2ÞXk i1⁄41x0ðnÞd2 1⁄4x0ðiÞ; k 1⁄4 1;2;...n ð6Þ</a><br><br><a id="r101" onmouseover="over('r101', 's101')" onmouseout="out('s101')">P</a><br><br><a id="r102" onmouseover="over('r102', 's102')" onmouseout="out('s102')">x0 ðiÞ i1⁄41</a><br><br><a id="r103" onmouseover="over('r103', 's103')" onmouseout="out('s103')">dðkþ1Þ1, k1⁄42;3;...;n1; dðkÞ21⁄20;0:5, k1⁄43;4;...;n とすれば、X0 は非ネガティブな dðkÞative 準平滑列である。このテストにより、生データの灰色指数法則の特性も検証できる。</a><br><br><a id="r104" onmouseover="over('r104', 's104')" onmouseout="out('s104')">2. 初期シーケンスにAGO（アキュムレーティング・ジェネレーション・オペレーター）プロセスを行う。</a><br><br><a id="r105" onmouseover="over('r105', 's105')" onmouseout="out('s105')">1231188Nat Hazards (2016) 83:1177-1196 3.</a><br><br><a id="r106" onmouseover="over('r106', 's106')" onmouseout="out('s106')">4.</a><br><br><a id="r107" onmouseover="over('r107', 's107')" onmouseout="out('s107')">D2はX0の1-AGO列と呼ばれます。このステップの後、X0はより滑らかになり、より明確に指数法則に従うようになります。</a><br><br><a id="r108" onmouseover="over('r108', 's108')" onmouseout="out('s108')">平均配列Að1Þ 1⁄4 ðað1Þð1Þ; að1Þð2Þ; ...; að1ðnÞ は、að1ÞðkÞ1⁄412ðxð1Þkþxð1Þðk1ÞÞ; k1⁄42;3;・・・。 GM (1, 1) NSI 予測モデルの構築x0ðkÞ þ aað1Þðk 1⁄4 b ð8Þここで、aは進化パラメータ（グレーシステムの発達を反映）、bはグレーの内因性作用である。未知のパラメータaを推定するために、最小二乗パラメータ推定法を用いる。</a><br><br><a id="r109" onmouseover="over('r109', 's109')" onmouseout="out('s109')">a^ 1⁄4 1⁄2a; bT がパラメータ列で、2 x0ð2Þ 3 2 að1Þð2Þ と仮定する。</a><br><br><a id="r110" onmouseover="over('r110', 's110')" onmouseout="out('s110')">6 x0ð3Þ 7 6 að1Þð3Þ:::Y 1⁄4 6 : 7; B 1⁄4 6 :64 : 75 64 : : 75x0 ðnÞ að1Þ ðnÞ 1上記のGM (1, 1) NSI予測モデルx0ðkÞ þ aað1ÞðkÞ 1⁄4 bの最小二乗法による推定パラメータ列は、ya^ 1⁄4 ðBT BÞ1 BT Y ð10Þ微分方程式dxð1Þ þ axð1Þ 1⁄4 bを用いて、時間応答関数dtを取得する。</a><br><br><a id="r111" onmouseover="over('r111', 's111')" onmouseout="out('s111')">ð1Þ ð1Þ b at bx ðtÞ1⁄4 x ð1Þa e þa ð11Þ</a><br><br><a id="r112" onmouseover="over('r112', 's112')" onmouseout="out('s112')">したがって、NSI GM (1, 1) 予測モデルの時間応答シーケンスは、 ð1Þ b aðk1Þ bx^ ðk1Þ⁄4 x0ð1Þa e þa; k1⁄41;2;...n ð12Þ 復元値は以下のようになる。</a><br><br><a id="r113" onmouseover="over('r113', 's113')" onmouseout="out('s113')">ð1Þ x^ðkÞ1⁄4x^ ðkÞx^ ðk1Þ; k1⁄41;2;...;n ð13Þ</a><br><br><a id="r114" onmouseover="over('r114', 's114')" onmouseout="out('s114')">式(12)から、次のステップでX0の予測値を復元するために必要な、Xð1Þの予測値を得ることができる。そして、復元した値とX0の間の平均相対誤差をテストし、復元した値の精度を確認する必要がある。最後に、次の連続エポックのDCIとNSIの予測値を求めることができる。</a><br><br><a id="r115" onmouseover="over('r115', 's115')" onmouseout="out('s115')">12301 31 7: 7 ð9ÞNat Hazards (2016) 83:1177-1196 1189 4 ケーススタディ</a><br><br><a id="r116" onmouseover="over('r116', 's116')" onmouseout="out('s116')">4.1 Ya'an地震データセット</a><br><br><a id="r117" onmouseover="over('r117', 's117')" onmouseout="out('s117')">新しいシステムの効率性と実用性を検証するために、我々はシステムのパフォーマンスをテストするために、Ya'an earthquakeの実世界のデータセットを使用しました。</a><br><br><a id="r118" onmouseover="over('r118', 's118')" onmouseout="out('s118')">2013年4月20日08:02(UTC ? 8 h)に雅安地震が発生しました。この地震のマグニチュードはMs7.0で、中国地震データセンターによって記録されました。震源地は四川省雅安市の廬山県です。震源地は四川省雅安市の廬山県で、雅安市緊急管理局の報告によると、震源地の町の建物の99％近くが破壊されたとのことです。その結果、診療所や病院、その他の政府の救援機関では、水道や電気が使えなくなりました。2013年4月24日14時30分までに、雅安地震による死者は約196名、行方不明者は21名、負傷者は11,000名を超えました。中国政府は、この地震により150万人、1万2千平方キロメートルの地域が影響を受けると予想していると発表しました。</a><br><br><a id="r119" onmouseover="over('r119', 's119')" onmouseout="out('s119')">Sina Weibo APIによるデータ収集方法を用いて、まず雅安市のアクティブなWeiboメンバーのUIDを取得し、2013年4月20日08:00から2013年4月22日08:00までに投稿されたWeiboメッセージを取得しました。最終的に、約25,302件のWeiboメッセージを収集し、初期の生データセットとした。</a><br><br><a id="r120" onmouseover="over('r120', 's120')" onmouseout="out('s120')">4.2 実験</a><br><br><a id="r121" onmouseover="over('r121', 's121')" onmouseout="out('s121')">生データを調べてみると、多くの反復的なマイクロブログのインスタンスがあることがわかりました。これらのメッセージは、研究の助けにならないだけでなく、計算の複雑さを増大させます。そこで、これらのメッセージを削除しました。このようにして、雅安の地震後の微博メッセージのデータセットには、20,738件のマイクロブロギング・インスタンスが含まれています。</a><br><br><a id="r122" onmouseover="over('r122', 's122')" onmouseout="out('s122')">次に、各メッセージの特徴ベクトルを生成するために、以下の手順を行いました。</a><br><br><a id="r123" onmouseover="over('r123', 's123')" onmouseout="out('s123')">1. ハッシュタグ、ユーザーの発言、ハイパーリンクは一定の文字列値に置き換えられましたが、その他の句読点や顔文字はすべて保存され、シンボルセットが構築されました。</a><br><br><a id="r124" onmouseover="over('r124', 's124')" onmouseout="out('s124')">2. テキストのセグメンテーション。</a><br><br><a id="r125" onmouseover="over('r125', 's125')" onmouseout="out('s125')">3. ステップ(1)で導入されたストップワードとトークンを除去して、以下のセットを作成した。</a><br><br><a id="r126" onmouseover="over('r126', 's126')" onmouseout="out('s126')">の一文字で、元のハッシュタグのトークンは含まれていますが、ユーザーの言及やハイパーリンクは含まれていません。</a><br><br><a id="r127" onmouseover="over('r127', 's127')" onmouseout="out('s127')">4. 最終的なセットは、コンジョイントシンボルセットとユニグラムセットで構成されました。</a><br><br><a id="r128" onmouseover="over('r128', 's128')" onmouseout="out('s128')">これらのステップを経て、マイクロブログのインスタンスのベクトル化が完了しました。</a><br><br><a id="r129" onmouseover="over('r129', 's129')" onmouseout="out('s129')">このようにして、初期の生のメッセージは、特徴ベクトル空間によって記述されました。</a><br><br><a id="r130" onmouseover="over('r130', 's130')" onmouseout="out('s130')">前述のように，変化する世間の雰囲気を追跡するためには，フェーズ1である災害関連メッセージの識別が必要です．開発したSVM分類器を用いて、15,372件のメッセージを含む雅安地震関連のマイクロブログのデータセットを取得し、これを災害関連データセットと呼ぶことにした。</a><br><br><a id="r131" onmouseover="over('r131', 's131')" onmouseout="out('s131')">さらに、フェーズ2では、災害関連のデータセットを用いて、新しい特徴部を持つ分類器を開発しています。</a><br><br><a id="r132" onmouseover="over('r132', 's132')" onmouseout="out('s132')">2つのフェーズで使用した分類器の性能をテストするために，各データセットから20 %のデータをランダムに選び，2つの人工サンプルデータセットの各メッセージに対して正しい結果をラベル付けしました．サンプリングの結果，どちらの分類器も良好な性能を示した</a><br><br><a id="r133" onmouseover="over('r133', 's133')" onmouseout="out('s133')">1231190 Nat Hazards (2016) 83:1177-1196 で、災害関連の分類器は94.31 %の精度を得たが、否定的なメッセージの分類器は88.25 %の精度を得た。</a><br><br><a id="r134" onmouseover="over('r134', 's134')" onmouseout="out('s134')">さらに、災害関連のデータセットとネガティブなメッセージのデータセットを、進行中の時間ウィンドウにプロットしました。緊急時の対応のため、1時間をエポックとした。以上の計算過程と計算式から、雅安地震発生から48時間後のDCI曲線とNSI曲線を求めた。</a><br><br><a id="r135" onmouseover="over('r135', 's135')" onmouseout="out('s135')">提案したGM(1,1)予測モデルに基づいて、実データの最初の3つのエポックを初期データとし、次の4つのエポックのDCI値とNSI値を予測しました。次に、実データの最初の4つのエポックを初期データとし、次の5つのDCI値とNSI値のエポック値を予測しました。最後のエポックの値が得られるまでこのプロセスを続け、その時点でこの予測プロセスを停止する。その結果、雅安地震発生後48時間のDCI予測曲線とNSI予測曲線が得られました。</a><br><br><a id="r136" onmouseover="over('r136', 's136')" onmouseout="out('s136')">4.3 インシデントイベントの発見</a><br><br><a id="r137" onmouseover="over('r137', 's137')" onmouseout="out('s137')">実験結果を図3と図4で説明します。図3は実DCIと予測DCIの経時変化を、図4は実NSIと予測NSIの経時変化を示しています。このように、GM（1、1）予測モデルの初期データセットとして最初の3つのエポックのデータを使用したため、実曲線と予測曲線の初期値が図中で重なっていることがわかります。結果は必ずしも同期していません。以上の分析結果から、一般的には、実DCIとNSIの値が大きいエポックに注目します。そこで、結果を分析するために、4象限分析法を導入しました。</a><br><br><a id="r138" onmouseover="over('r138', 's138')" onmouseout="out('s138')">広く使われている4象限分析法は、通常、分析対象の2つの重要な指標の間の潜在的な関係に重み付けをして行われます。2つの指標の次元で4象限図を使うと、4つの異なるシナリオが得られます。それは</a><br><br><a id="r139" onmouseover="over('r139', 's139')" onmouseout="out('s139')">        図3 DCI曲線 123Nat Hazards (2016) 83:1177-1196 1191 図4 NSI曲線</a><br><br><a id="r140" onmouseover="over('r140', 's140')" onmouseout="out('s140')">    可能性を分析するための優れたツールです。場合によっては、潜在的なシナリオの範囲を論理的な方法で提示する方法にもなります。さらに、この方法は、潜在的な決定を管理するためにも容易に使用することができます。</a><br><br><a id="r141" onmouseover="over('r141', 's141')" onmouseout="out('s141')"> NSI-real-NSI-pre2827 944 34 354 121220 2114 132910 2537 323324 6 4342 41404736 1626 30 75図5 48エポックの4象限分布図</a><br><br><a id="r142" onmouseover="over('r142', 's142')" onmouseout="out('s142')">2239 4831 38 19 46 178 45 15 2311DCI-real-DCI-pre1231192 Nat Hazards (2016) 83:1177-1196</a><br><br><a id="r143" onmouseover="over('r143', 's143')" onmouseout="out('s143')"> 広く使われている4象限分析法は、通常、分析対象の2つの重要な指標の間の潜在的な関係に重み付けをしています。2つの指標の次元で4象限図を使うと、4つの異なるシナリオが得られます。これは可能性を分析するための優れたツールです。時には、潜在的なシナリオの範囲を論理的に提示するための明確な方法でもあります。また、この方法は、潜在的な意思決定を把握するのにも容易に使用できます。これは、将来の焦点が、直接コントロールできるシステム、特に意思決定に絞られている場合に有効です。</a><br><br><a id="r144" onmouseover="over('r144', 's144')" onmouseout="out('s144')">本研究では、X軸をDCI-real-DCI-preの値、Y軸をNSI-real-NSI-preの値と定義し、座標の原点はDCI-real＝DCI-pre、NSI-real＝NSI-preであることを示します。そして、この与えられた4象限の座標系に、すべてのタイムエポックを実数と予測値のインデックスでプロットした。</a><br><br><a id="r145" onmouseover="over('r145', 's145')" onmouseout="out('s145')">その結果を図5に示す。予測誤差が組み込まれているため、他にも誤差が生じる要因はあるものの、実際の指標値が予測値よりも高い可能性が0.03以下のエポックによる誤差は無視しています。丸いアイコンの中の数字は、番号の付いたエポックに対応しています。</a><br><br><a id="r146" onmouseover="over('r146', 's146')" onmouseout="out('s146')">表4 異常時のエポックエポック2013/4/20 11:00-12:002013/4/20 16:00-17:002013/4/20 17:00-18:002013/4/20 19:00-20:002013/4/20 20:00-21:002013/4/21 4:00-5:002013/4/21 5:00-6:002013/4/21 10:00-11:002013/4/21 11:00-12:002013/4/21 10:00-11:002013/4/21 17:00-18: 002013/4/21 18:00-19:002013/4/21 22:00-23:002013/4/22 3:00-4:00Quadrants第2象限第2象限第1象限第1象限第3象限第1象限第2象限第1象限第2象限第1象限第1象限第2象限第1象限第2象限第1象限第2象限第1象限第2象限第1象限第1象限第1象限</a><br><br><a id="r147" onmouseover="over('r147', 's147')" onmouseout="out('s147')">考えられる理由</a><br><br><a id="r148" onmouseover="over('r148', 's148')" onmouseout="out('s148')">亞安長官の亞安地震に関する発言が物議を醸すBaoxing County, a bard-hit town, could not be contactedBaoxing County, a bard-hit town, can't be contacted</a><br><br><a id="r149" onmouseover="over('r149', 's149')" onmouseout="out('s149')">マグニチュード4.5の余震</a><br><br><a id="r150" onmouseover="over('r150', 's150')" onmouseout="out('s150')">李克強首相が被災地に駆けつけ、スピーチを行いました</a><br><br><a id="r151" onmouseover="over('r151', 's151')" onmouseout="out('s151')">マグニチュード5.0の余震</a><br><br><a id="r152" onmouseover="over('r152', 's152')" onmouseout="out('s152')">過剰な救助活動の結果、交通渋滞が発生Baoxing Countyのメインエントランスで起こった過剰な救助活動の結果、交通渋滞が発生Baoxingのメインエントランスで起こった。</a><br><br><a id="r153" onmouseover="over('r153', 's153')" onmouseout="out('s153')">マグニチュード5.4の余震</a><br><br><a id="r154" onmouseover="over('r154', 's154')" onmouseout="out('s154')">4.3マグニチュードの余震 3.8マグニチュードの余震</a><br><br><a id="r155" onmouseover="over('r155', 's155')" onmouseout="out('s155')">  123Nat Hazards (2016) 83:1177-1196 1193</a><br><br><a id="r156" onmouseover="over('r156', 's156')" onmouseout="out('s156')"> この4象限パターンでは、第1象限が「DCI-real[ DCI-pre]」と「NSI-real[ NSI-pre]」を示しています。第1象限にエポックがある場合、何か大きな注目を集め、ネガティブな感情を引き起こすような事件が再発したことが推測されます。話題になっている事件は、早急に対処しなければならない何らかの緊急事態や危機である。今回の事例では、48エポックのうち11エポックが第1象限にありました。</a><br><br><a id="r157" onmouseover="over('r157', 's157')" onmouseout="out('s157')">第2象限には、DCI-real ≒ DCI-pre、NSI-real ≒ NSI-pre のすべてのケースが含まれていると定義されています。もし、あるエポックが第2象限に位置していれば、そのエポックの間に何か大衆のネガティブな感情を高めるような出来事があったと推察されます。したがって、このエポックにもっと注意を払い、その原因を見つけなければなりません。そうしないと、ネガティブな感情が急速に強く広がり、危機につながる可能性があるからです。今回のケーススタディでは、48のエポックのうち4つが第1象限に該当しました。</a><br><br><a id="r158" onmouseover="over('r158', 's158')" onmouseout="out('s158')">第3象限は、DCI-real ≒ DCI-pre、NSI-real ≒ NSI-preで定義されます。エポックが第3象限内にあれば、状況は正常です。</a><br><br><a id="r159" onmouseover="over('r159', 's159')" onmouseout="out('s159')">第3象限は、DCI-real [ DCI-pre ] と NSI-real ≒ NSI-pre で定義されます。第4象限にあるエポックは、市民が災害に関心を持っていることを示しているが、過度なネガティブな感情を伴うものではない。</a><br><br><a id="r160" onmouseover="over('r160', 's160')" onmouseout="out('s160')">異常な時間帯に投稿されたマイクロブログの事例（第1、第2、第4象限にプロットされたエポック）を詳細にチェックすることで、これらの感情に対応する可能性のある理由を表4に確立しました。</a><br><br><a id="r161" onmouseover="over('r161', 's161')" onmouseout="out('s161')">これらの結果から、震災後の国民感情についていくつかの特徴が見えてきました。</a><br><br><a id="r162" onmouseover="over('r162', 's162')" onmouseout="out('s162')">地震の余震のような緊急事態が発生した直後は、被災者は災害そのものに目を向けるようになり、それが国民の恐怖心などのネガティブな感情を生み出します。表4にあるように、余震直後のエポックはすべて第1象限にプロットされています。</a><br><br><a id="r163" onmouseover="over('r163', 's163')" onmouseout="out('s163')">その結果、危機が迫っている場合、ネガティブな感情が高まる傾向が明らかになりました。図5に示すように、これらの危機は、赤い線で示すように、現実の社会的危機になる可能性があり、また、青い線で示すように、時間内に解決する可能性もあります。したがって、第2象限のエポックは、重大な注意を必要とする問題を表しています。</a><br><br><a id="r164" onmouseover="over('r164', 's164')" onmouseout="out('s164')">5 結論と考察</a><br><br><a id="r165" onmouseover="over('r165', 's165')" onmouseout="out('s165')">Weiboのデータは、ユーザーの気分を反映することができるため、データマイニングによって災害後の状況におけるネガティブなメッセージを特定することが可能です。群衆のネガティブな感情の予測に基づいて、災害後の状況におけるインシデントイベントを発見するフレームワークを開発しました。このフレームワークは、3つの重要なフェーズを用いて構築されています。</a><br><br><a id="r166" onmouseover="over('r166', 's166')" onmouseout="out('s166')">まず，災害に関連する中国のマイクロブログの事例を識別するために分類器を学習した．本論文では，「玉樹地震」，「北京暴雨」，「夕陽洪水」の後に投稿したアクティブユーザから，ポジティブなものとネガティブなものが均等に含まれる12,424件のメッセージのサンプルを入手した．機械学習モデルを構築し，災害に関するWeiboメッセージを検出した．新しいテキスト表現法であるDRFに基づいて，効果的なRF ? DRW分類器を開発し，その後のケーススタディでは94.31 %の精度という良好な結果を得ました．</a><br><br><a id="r167" onmouseover="over('r167', 's167')" onmouseout="out('s167')">さらに、大量の災害関連のマイクロブログ・インスタンスからネガティブなメッセージを識別するために、ネガティブ・メッセージ・フィルターを構築しました。その結果，SVM ? DRWの組み合わせは，単語表現法と機械学習法のすべての組み合わせの中で，最も優れた性能を示した．</a><br><br><a id="r168" onmouseover="over('r168', 's168')" onmouseout="out('s168')">1231194 Nat Hazards (2016) 83:1177-1196 学習アルゴリズムは、災害後の状況でネガティブなWeiboメッセージを見つけるのに役立つモデルであることを意味しています。以下のケーススタディでは、新規の特徴表現法を用いたSVM分類器が最も適したモデルであり、88.25 %の精度が得られました 。</a><br><br><a id="r169" onmouseover="over('r169', 's169')" onmouseout="out('s169')">実証研究では、前の2つのフェーズの目的は、災害後の状況で潜在的なインシデント・イベントを発見するために、継続的な時間ウィンドウで災害関連指数とネガティブセンチメント指数を計算し、予測することです。したがって、すべての否定的なメッセージは、その投稿時間に応じて連続したエポックにプロットされなければなりません。さらに、時系列で変化する人々の注意を測定するために、DCIとNSIという2つの指標を定義します。過去の結果から、DCIとNSIのデータとGM(1, 1)モデルは実用的で有用な予測方法であり、その後のDCIとNSIの値を予測するのに使用できることが分かっています。したがって、各エポックにおいて、過去のデータを用いてGM（1、1）から予測DCIとNSIを得ることができ、また、実際のWeiboプラットフォームのデータから計算された実際のDCIとNSIの値を得ることができます。今回の雅安地震のケーススタディでは、各エポックにおける実測値と予測値の差を計算し、エポックを4つの象限に分けて潜在的なインシデントを発見しました。その結果、災害後の状況では、異なるインシデントイベントがデータ上で異なる表現をする傾向があることがわかりました。余震などの二次災害が発生したエポックは、通常、第1象限に位置している。しかし、世論喚起イベントが発生したエポックは、当初は第2象限に位置することが多いが、当局の反応によって将来の方向性が異なる。反応が悪ければ、方向性が第1象限に上がって飛び、さらに注目を集めてネガティブな感情を煽ることもある。逆に、効果的な緊急情報管理によって、第4象限に発展したり、第3象限にフェードアウトすることもあります。</a><br><br><a id="r170" onmouseover="over('r170', 's170')" onmouseout="out('s170')">簡単に言えば、提案されたフレームワークは、被災者の変化する感情状態を追跡するだけでなく、災害後の事件を発見するのにも役立ちます。また、このプラットフォームとフレームワークは、災害時の救助活動にも役立ちます。我々は、緊急管理においてスマートフォンとソーシャルネットワーク情報を使用することが合理的であることを示す。効率的な分類と適切な予測精度により、このフレームワークは、災害後の被災者の状態をどのように観察・分析するかについて、新たな視点を提供してくれるものと考えています。</a><br><br><a id="r171" onmouseover="over('r171', 's171')" onmouseout="out('s171')">現状では、我々の提案するフレームワークを用いて、潜在的な危機を発見し、インシデントの状況を確認することができる。しかし、イベントの手がかりを手動で探る必要がある。そのため、今後は、災害後のトピックを自動的に検出・追跡するシステムの構築や、被災者の反応に応じた当局の情報管理対策の評価などが課題となる。</a><br>
</div>
</div><style>
:root {
--main-text: #452b15;
--main-bg: #f8f1e2;
--highlight-text: #db8e3c;
}
:root[theme="dark"] {
--main-text: #b0b0b0;
--main-bg: #121212;
--highlight-text: #fd8787;
}
h1 {
color: var(--main-text);
}
input {
position: absolute;
top: 1%;
right: 1%;
}
#source {
width: 43%;
height: 90%;
padding: 0 2%;
float: left;
border-right:1px solid #ccc;
margin: 1%;
overflow: auto;
}
#result {
width: 43%;
height: 90%;
padding: 0 2%;
float: right;
margin: 1%;
overflow: auto;
}
a,
a:hover,
a:visited,
a:link,
a:active {
color: var(--main-text);
text-decoration: none;
}
body {
background-color: var(--main-bg);
}
</style>
<script>
var a = document.getElementsByTagName("a");
function over(s,o) {
var elements = document.getElementById(s);
var elemento = document.getElementById(o);
var rects = elements.getBoundingClientRect();
var recto = elemento.getBoundingClientRect();
var x = recto.left;
var y = recto.top - rects.top;
elemento.parentNode.scrollBy(x, y);
elemento.style.color = getComputedStyle(elemento).getPropertyValue("--highlight-text");
}
function out(e) {
document.getElementById(e).style.color = getComputedStyle(document.getElementById(e)).getPropertyValue("--main-text");
}
const btn = document.querySelector("#btn-mode");
btn.addEventListener("change", () => {
if (btn.checked == true) {
document.documentElement.setAttribute("theme", "dark");
} else {
document.documentElement.setAttribute("theme", "light");
}
for (var i = 0; i < a.length; i++) {
a[i].style.color = getComputedStyle(a[i]).getPropertyValue("--main-text");
}
});
</script>
</body>